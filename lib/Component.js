!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Nexus=e():t.Nexus=e()}(this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}return i.m=t,i.c=e,i.p="",i(0)}([function(t,e,i){"use strict";var s,n=(s=i(1))&&s.__esModule?s.default:s;t.exports=n},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t},n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();e.colors=function(){return g.colors},e.context=function(){return g.context},e.clock=function(){return g.clock},Object.defineProperty(e,"__esModule",{value:!0});var r,o=s(i(2)),h=s(i(5)),a=s(i(38)),l=s(i(40)),u=(r=i(39))&&r.__esModule?r:{default:r},c=i(28),f=i(41),d=i(27),v=i(26),p=i(25),m=s(i(42)),b=s(i(45)),g=new(function(){function t(e){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o)this[i]=o[i];for(var i in h)this[i]=h[i];var s={Rack:a},n={Counter:c,Radio:f,Drunk:d,Sequence:v,Matrix:p};for(var i in n)this[i]=n[i];for(var i in s)this[i]=s[i];var r=window.AudioContext||window.webkitAudioContext;for(var i in this._context=e||new r,this.tune=new l,this.note=this.tune.note.bind(this.tune),this.clock=new m(this._context),this.clock.start(),this.Interval=b,this.colors={accent:"#2bb",fill:"#eee",light:"#fff",dark:"#333",mediumLight:"#ccc",mediumDark:"#666"},this.transform=u,this.add=u.add,this.Add={},o)this.Add[i]=u.add.bind(this,i);var g=document.getElementsByTagName("style"),y="[nexus-ui]{height:5000px;width:5000px}",x=document.createElement("style");x.type="text/css",x.innerHTML=y,g.length>0?g[0].parentNode.insertBefore(x,g[0]):document.write("<style>"+y+"</style>")}return n(t,{context:{get:function(){return this._context},set:function(t){this.clock.stop(),this._context=t,this.clock=new m(this.context),this.clock.start()}}}),t}());e.default=g},function(t,e,i){"use strict";t.exports={Position:i(3),Slider:i(14),Toggle:i(15),Button:i(16),TextButton:i(18),RadioButton:i(19),Number:i(20),Select:i(21),Dial:i(22),Piano:i(23),Sequencer:i(24),Pan2D:i(29),Tilt:i(30),Multislider:i(31),Pan:i(33),Envelope:i(34),Spectrogram:i(35),Meter:i(36),Oscilloscope:i(37)}},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(6),l=i(11),u=(s=i(12))&&s.__esModule?s:{default:s},c=function(t){function e(){o(this,e);var t=["value"],i={size:[200,200],mode:"absolute",minX:0,maxX:1,stepX:0,x:.5,minY:0,maxY:1,stepY:0,y:.5};r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._x=new l(this.settings.minX,this.settings.maxX,this.settings.stepX,this.settings.x),this._y=new l(this.settings.minY,this.settings.maxY,this.settings.stepY,this.settings.y),this.position={x:new u.Handle(this.settings.mode,"horizontal",[0,this.width],[this.height,0]),y:new u.Handle(this.settings.mode,"vertical",[0,this.width],[this.height,0])},this.position.x.value=this._x.normalized,this.position.y.value=this._y.normalized,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.knob=h.create("circle"),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.position.x.resize([0,this.width],[this.height,0]),this.position.y.resize([0,this.width],[this.height,0]),this._minDimension=Math.min(this.width,this.height),this.knobRadius={off:5*~~(this._minDimension/100)+5},this.knobRadius.on=2*this.knobRadius.off,this.knob.setAttribute("cx",this.width/2),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobRadius.off)}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.knob.setAttribute("fill",this.colors.accent)}},render:{value:function(){this.clicked?this.knob.setAttribute("r",this.knobRadius.on):this.knob.setAttribute("r",this.knobRadius.off),this.knobCoordinates={x:this._x.normalized*this.width,y:this.height-this._y.normalized*this.height},this.knob.setAttribute("cx",this.knobCoordinates.x),this.knob.setAttribute("cy",this.knobCoordinates.y)}},click:{value:function(){this.position.x.anchor=this.mouse,this.position.y.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.x.update(this.mouse),this.position.y.update(this.mouse),this._x.updateNormal(this.position.x.value),this._y.updateNormal(this.position.y.value),this.emit("change",{x:this._x.value,y:this._y.value}),this.render())}},release:{value:function(){this.render()}},x:{get:function(){return this._x.value},set:function(t){this._x.update(t),this.emit("change",{x:this._x.value,y:this._y.value}),this.render()}},y:{get:function(){return this._y.value},set:function(t){this._y.update(t),this.emit("change",{x:this._x.value,y:this._y.value}),this.render()}},normalized:{get:function(){return{x:this._x.normalized,y:this._y.normalized}}},minX:{get:function(){return this._x.min},set:function(t){this._x.min=t,this.render()}},minY:{get:function(){return this._y.min},set:function(t){this._y.min=t,this.render()}},maxX:{get:function(){return this._x.max},set:function(t){this._x.max=t,this.render()}},maxY:{get:function(){return this._y.max},set:function(t){this._y.max=t,this.render()}},stepX:{get:function(){return this._x.step},set:function(t){this._x.step=t,this.render()}},stepY:{get:function(){return this._y.step},set:function(t){this._y.step=t,this.render()}},mode:{get:function(){return this.position.x.mode},set:function(t){this.position.x.mode=t,this.position.y.mode=t}}}),e}(a);t.exports=c},function(t,e,i){"use strict";var s=i(5);t.exports={create:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},arc:function(t,e,i,n,r){var o=s.toCartesian(i,r),h=s.toCartesian(i,n),a=r-n<=180?"0":"1";return["M",o.x+t,o.y+e,"A",i,i,0,a,0,h.x+t,h.y+e].join(" ")},radialGradient:function(t,e){var i="gradient"+s.ri(1e11),n=[],r=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");r.setAttribute("id",i),r.setAttribute("cx","50%"),r.setAttribute("cy","50%"),r.setAttribute("r","50%"),t.appendChild(r);for(var o=0;o<e;o++){var h=document.createElementNS("http://www.w3.org/2000/svg","stop");h.setAttribute("id","stop"+o),r.appendChild(h),n.push(h)}return{id:i,stops:n,element:r}}}},function(t,e){"use strict";e.clip=function(t,e,i){return Math.min(Math.max(t,e),i)},e.normalize=function(t,e,i){return(t-e)/(i-e)},e.scale=function(t,e,i,s,n){return e===i?s:(t-e)*(n-s)/(i-e)+s},e.toPolar=function(t,e){var i=Math.sqrt(t*t+e*e),s=Math.atan2(e,t);return s<0&&(s+=2*Math.PI),{radius:i,angle:s}},e.toCartesian=function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)*-1}},e.prune=function(t,e){return parseFloat(t.toFixed(e))},e.invert=function(t){return e.scale(t,1,0,0,1)},e.mtof=function(t){return 440*Math.pow(2,(t-69)/12)},e.interp=function(t,e,i){return t*(i-e)+e},e.pick=function(){return arguments[~~(Math.random()*arguments.length)]},e.octave=function(t){return Math.pow(2,t)},e.ri=function(t,e){e||(e=t,t=0);var i=Math.min(t,e),s=Math.max(t,e);return Math.floor(Math.random()*(s-i)+i)},e.rf=function(t,e){e||(e=t,t=0);var i=Math.min(t,e),s=Math.max(t,e);return Math.random()*(s-i)+i},e.cycle=function(t,e,i){return++t>=i&&(t=e),t},e.average=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e/t.length},e.distance=function(t,e,i,s){var n=t-i,r=e-s;return Math.sqrt(n*n+r*r)},e.gainToDB=function(t){return 20*Math.log10(t)},e.coin=function(){var t=void 0===arguments[0]?.5:arguments[0];return e.rf(0,1)<t?1:0}},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=i(4),o=i(7),h=i(8),a=i(9),l=i(10),u=i(1).colors,c=function(t){function e(t,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.type=this.constructor.name,this.settings=this.parseSettings(t,i,s),this.mouse={},this.wait=!1,this.colors={};var r=u();this.colors.accent=r.accent,this.colors.fill=r.fill,this.colors.light=r.light,this.colors.dark=r.dark,this.colors.mediumLight=r.mediumLight,this.colors.mediumDark=r.mediumDark}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{parseSettings:{value:function(t,e,i){e.unshift("target"),i.defaultSize=i.size.splice(0,2),i.size=!1;var s={target:document.body,colors:{},snapWithParent:!0,event:function(){},component:!1};for(var n in i)s[n]=i[n];for(var r=0;r<t.length;r++){var a=t[r];if(h.isObject(a))for(var n in a)s[n]=a[n];else"function"==typeof a?s.event=a:e.length>=1&&(s[n=e.splice(0,1)[0]]=a)}return this.parent=o.parseElement(s.target),this.parent&&this.parent instanceof HTMLElement&&!s.component&&(this.parent.hasAttribute("nexus-ui")||this.parent.setAttribute("nexus-ui","")),s.size&&Array.isArray(s.size)&&s.snapWithParent?(this.width=s.size[0],this.height=s.size[1],this.parent.style.width=this.width+"px",this.parent.style.height=this.height+"px"):s.snapWithParent&&!s.component?(this.width=parseFloat(window.getComputedStyle(this.parent,null).getPropertyValue("width").replace("px","")),this.height=parseFloat(window.getComputedStyle(this.parent,null).getPropertyValue("height").replace("px","")),5e3==this.width&&(this.width=s.defaultSize[0],this.parent.style.width=this.parent.width=this.width+"px"),5e3==this.height&&(this.height=s.defaultSize[1],this.parent.style.height=this.parent.height=this.height+"px")):(s.size=s.defaultSize,this.width=s.size[0],this.height=s.size[1]),s.event?this.event=this.on("change",s.event):this.event=!1,s}},init:{value:function(){this.buildFrame(),this.buildInterface(),this.sizeInterface(),this.attachListeners(),this.colorInterface(),this.finalTouches()}},buildFrame:{value:function(){this.element=r.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.parent.appendChild(this.element)}},buildInterface:{value:function(){}},sizeInterface:{value:function(){}},colorInterface:{value:function(){}},attachListeners:{value:function(){var t=this;this.interactionTarget=this.interactionTarget||this.element,a.exists&&(this.interactionTarget.addEventListener("touchstart",(function(e){return t.preTouch(e)})),this.interactionTarget.addEventListener("touchmove",(function(e){return t.preTouchMove(e)})),this.interactionTarget.addEventListener("touchend",(function(e){return t.preTouchRelease(e)}))),this.boundPreMove=function(e){return t.preMove(e)},this.boundPreRelease=function(e){return t.preRelease(e)},this.interactionTarget.addEventListener("mousedown",(function(e){return t.preClick(e)}))}},finalTouches:{value:function(){this.element.style.cursor="pointer"}},preClick:{value:function(t){this.element instanceof HTMLElement&&(this.width=window.getComputedStyle(this.element,null).getPropertyValue("width").replace("px","")),this.offset=o.findPosition(this.element),this.mouse=o.locateMouse(t,this.offset),this.clicked=!0,this.click(),this.moveEvent=document.addEventListener("mousemove",this.boundPreMove),this.releaseEvent=document.addEventListener("mouseup",this.boundPreRelease),this.emit("click"),t.preventDefault(),t.stopPropagation()}},preMove:{value:function(t){var e=this;this.wait||(this.mouse=o.locateMouse(t,this.offset),this.move(),this.wait=!0,setTimeout((function(){e.wait=!1}),25)),t.preventDefault(),t.stopPropagation()}},preRelease:{value:function(t){this.mouse=o.locateMouse(t,this.offset),this.clicked=!1,this.release(),this.emit("release"),document.removeEventListener("mousemove",this.boundPreMove),document.removeEventListener("mouseup",this.boundPreRelease),t.preventDefault(),t.stopPropagation()}},click:{value:function(){}},move:{value:function(){}},release:{value:function(){}},preTouch:{value:function(t){this.element instanceof HTMLElement&&(this.width=window.getComputedStyle(this.element,null).getPropertyValue("width").replace("px","")),this.offset=o.findPosition(this.element),this.mouse=o.locateTouch(t,this.offset),this.clicked=!0,this.touch(t),this.emit("click"),t.preventDefault(),t.stopPropagation()}},preTouchMove:{value:function(t){this.clicked&&(this.mouse=o.locateTouch(t,this.offset),this.touchMove(),t.preventDefault(),t.stopPropagation())}},preTouchRelease:{value:function(t){this.mouse=o.locateTouch(t,this.offset),this.clicked=!1,this.touchRelease(),this.emit("release"),t.preventDefault(),t.stopPropagation()}},touch:{value:function(){this.click()}},touchMove:{value:function(){this.move()}},touchRelease:{value:function(){this.release()}},resize:{value:function(t,e){this.width=t,this.height=e,this.parent.style.width=this.width+"px",this.parent.style.height=this.height+"px",this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.sizeInterface()}},empty:{value:function(){for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild)}},destroy:{value:function(){this.empty(),this.parent.removeChild(this.element),this.removeAllListeners(),this.instrument&&delete this.instrument[this.id],this.customDestroy()}},customDestroy:{value:function(){}},colorize:{value:function(t,e){this.colors[t]=e,this.colorInterface()}}}),e}(l);t.exports=c},function(t,e){"use strict";e.findPosition=function(t){var e=t.getBoundingClientRect();return{top:e.top+window.scrollY,left:e.left+window.scrollX}},e.parseElement=function(t){return"string"==typeof t&&(t=document.getElementById(t.replace("#",""))),t instanceof HTMLElement||t instanceof SVGElement?t:"No valid parent argument"},e.locateMouse=function(t,e){return{x:t.pageX-e.left,y:t.pageY-e.top}},e.locateTouch=function(t,e){return{x:!!t.targetTouches.length&&t.targetTouches[0].pageX-e.left,y:!!t.targetTouches.length&&t.targetTouches[0].pageY-e.top}},e.SmartCanvas=function(t){var e=this;this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),t.appendChild(this.element),this.resize=function(t,i){e.element.width=2*t,e.element.height=2*i,e.element.style.width=t+"px",e.element.style.height=i+"px"}}},function(t,e){"use strict";e.isObject=function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t&&t instanceof SVGElement==0&&t instanceof HTMLElement==0}},function(t,e){"use strict";e.exists="ontouchstart"in document.documentElement},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,o,h,a,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(r(i=this._events[t]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:h=Array.prototype.slice.call(arguments,1),i.apply(this,h)}else if(n(i))for(h=Array.prototype.slice.call(arguments,1),o=(l=i.slice()).length,a=0;a<o;a++)l[a].apply(this,h);return!0},i.prototype.addListener=function(t,e){var o;if(!s(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,s(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(o=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!s(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},i.prototype.removeListener=function(t,e){var i,r,o,h;if(!s(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(i=this._events[t]).length,r=-1,i===e||s(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(i)){for(h=o;h-- >0;)if(i[h]===e||i[h].listener&&i[h].listener===e){r=h;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?s(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(s(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=i(5),o=function(){function t(){var e=void 0===arguments[0]?0:arguments[0],i=void 0===arguments[1]?1:arguments[1],s=void 0===arguments[2]?0:arguments[2],r=void 0===arguments[3]?0:arguments[3];n(this,t),this.min=e,this.max=i,this.step=s,this.value=r,this.changed=!1,this.oldValue=!1,this.update(this.value)}return s(t,{update:{value:function(t){return this.step?this.value=r.clip(Math.round((t-this.min)/this.step)*this.step+this.min,this.min,this.max):this.value=r.clip(t,this.min,this.max),this.oldValue!==this.value?(this.oldValue=this.value,this.changed=!0):this.changed=!1,this.value}},updateNormal:{value:function(t){return this.value=r.scale(t,0,1,this.min,this.max),this.update(this.value)}},normalized:{get:function(){return r.normalize(this.value,this.min,this.max)}}}),t}();t.exports=o},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t},n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var o=s(i(5)),h=s(i(13));e.Handle=function(){function t(){var e=void 0===arguments[0]?"absolute":arguments[0],i=void 0===arguments[1]?"vertical":arguments[1],s=void 0===arguments[2]?[0,100]:arguments[2],n=void 0===arguments[3]?[0,100]:arguments[3];r(this,t),this.mode=e,this.direction=i,this.previous=0,this.value=0,this.sensitivity=1,this.resize(s,n)}return n(t,{resize:{value:function(t,e){this.boundary={min:{x:t[0],y:e[0]},max:{x:t[1],y:e[1]},center:{x:(t[1]-t[0])/2+t[0],y:(e[1]-e[0])/2+e[0]}}}},anchor:{set:function(t){this._anchor=this.convertPositionToValue(t)},get:function(){return this._anchor}},update:{value:function(t){if("relative"===this.mode){var e=this.convertPositionToValue(t)-this.anchor;Math.abs(e)>.5&&(e=0),this.anchor=t,this.value=this.value+e*this.sensitivity}else this.value=this.convertPositionToValue(t);this.value=o.clip(this.value,0,1)}},convertPositionToValue:{value:function(t){switch(this.direction){case"radial":var e=o.toPolar(t.x-this.boundary.center.x,t.y-this.boundary.center.y);return((e=e.angle/(2*Math.PI))-.25+1)%1;case"vertical":return o.scale(t.y,this.boundary.min.y,this.boundary.max.y,0,1);case"horizontal":return o.scale(t.x,this.boundary.min.x,this.boundary.max.x,0,1)}}}}),t}(),e.Button=function(){function t(){var e=void 0===arguments[0]?"button":arguments[0];r(this,t),this.mode=e,this.state=new h,this.paintbrush=!1}return n(t,{click:{value:function(){switch(this.mode){case"impulse":this.state.on(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.state.off.bind(this),30),this.emit("change",this.state);break;case"button":this.turnOn(),this.emit("change",this.state);break;case"aftertouch":this.position={x:o.clip(this.mouse.x/this.width,0,1),y:o.clip(1-this.mouse.y/this.height,0,1)},this.turnOn(),this.emit("change",{state:this.state,x:this.position.x,y:this.position.y});break;case"toggle":this.flip(),this.emit("change",this.state)}}},move:{value:function(){"aftertouch"===this.mode&&(this.position={x:o.clip(this.mouse.x/this.width,0,1),y:o.clip(1-this.mouse.y/this.height,0,1)},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}),this.render())}},release:{value:function(){switch(this.mode){case"button":this.turnOff(),this.emit("change",this.state);break;case"aftertouch":this.turnOff(),this.position={x:this.mouse.x/this.width,y:1-this.mouse.y/this.height},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y})}}}}),t}()},function(t,e){"use strict";var i=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e||!1}return i(t,{flip:{value:function(t){this.state=t||!1===t?t:!this.state}},on:{value:function(){this.state=!0}},off:{value:function(){this.state=!1}}}),t}();t.exports=s},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(6),l=i(11),u=(s=i(12))&&s.__esModule?s:{default:s},c=function(t){function e(){o(this,e);var t=["min","max","value"],i={size:[120,20],mode:"relative",min:0,max:1,step:0,value:0};r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.orientation="vertical",this._value=new l(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.position=new u.Handle(this.settings.mode,this.orientation,[0,this.width],[this.height,0]),this.position.value=this._value.normalized,this.init(),this.position.direction=this.orientation,this.emit("change",this.value)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.bar=h.create("rect"),this.fillbar=h.create("rect"),this.knob=h.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.fillbar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.width<this.height?this.orientation="vertical":this.orientation="horizontal",this.position&&this.position.resize([0,this.width],[this.height,0]);var t=void 0,e=void 0,i=void 0,s=void 0,n=void 0,r=void 0;this.knobData={level:0,r:0},"vertical"===this.orientation?(this.thickness=this.width/2,t=this.width/2,e=0,i=this.thickness,s=this.height,this.knobData.r=.8*this.thickness,this.knobData.level=s-this.knobData.r-this.normalized*(s-2*this.knobData.r),n="translate("+-1*this.thickness/2+",0)",r=i/2):(this.thickness=this.height/2,t=0,e=this.height/2,i=this.width,s=this.thickness,this.knobData.r=.8*this.thickness,this.knobData.level=this.normalized*(i-2*this.knobData.r)+this.knobData.r,n="translate(0,"+-1*this.thickness/2+")",r=s/2),this.bar.setAttribute("x",t),this.bar.setAttribute("y",e),this.bar.setAttribute("transform",n),this.bar.setAttribute("rx",r),this.bar.setAttribute("ry",r),this.bar.setAttribute("width",i),this.bar.setAttribute("height",s),"vertical"===this.orientation?(this.fillbar.setAttribute("x",t),this.fillbar.setAttribute("y",this.knobData.level),this.fillbar.setAttribute("width",i),this.fillbar.setAttribute("height",s-this.knobData.level)):(this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("y",e),this.fillbar.setAttribute("width",this.knobData.level),this.fillbar.setAttribute("height",s)),this.fillbar.setAttribute("transform",n),this.fillbar.setAttribute("rx",r),this.fillbar.setAttribute("ry",r),"vertical"===this.orientation?(this.knob.setAttribute("cx",t),this.knob.setAttribute("cy",this.knobData.level)):(this.knob.setAttribute("cx",this.knobData.level),this.knob.setAttribute("cy",e)),this.knob.setAttribute("r",this.knobData.r)}},colorInterface:{value:function(){this.bar.setAttribute("fill",this.colors.fill),this.fillbar.setAttribute("fill",this.colors.accent),this.knob.setAttribute("fill",this.colors.accent)}},render:{value:function(){this.clicked||(this.knobData.r=.75*this.thickness),this.knob.setAttribute("r",this.knobData.r),"vertical"===this.orientation?(this.knobData.level=this.knobData.r+this._value.normalized*(this.height-2*this.knobData.r),this.knob.setAttribute("cy",this.height-this.knobData.level),this.fillbar.setAttribute("y",this.height-this.knobData.level),this.fillbar.setAttribute("height",this.knobData.level)):(this.knobData.level=this._value.normalized*(this.width-2*this.knobData.r)+this.knobData.r,this.knob.setAttribute("cx",this.knobData.level),this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("width",this.knobData.level))}},click:{value:function(){this.knobData.r=.9*this.thickness,this.position.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.update(this.mouse),this._value.updateNormal(this.position.value),this.emit("change",this._value.value),this.render())}},release:{value:function(){this.render()}},normalized:{get:function(){return this._value.normalized}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.position.value=this._value.normalized,this.emit("change",this._value.value),this.render()}},min:{get:function(){return this._value.min},set:function(t){this._value.min=t}},max:{get:function(){return this._value.max},set:function(t){this._value.max=t}},step:{get:function(){return this._value.step},set:function(t){this._value.step=t}},mode:{get:function(){return this.position.mode},set:function(t){this.position.mode=t}}}),e}(a);t.exports=c},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(4),h=i(13),a=function(t){function e(){r(this,e);var t=["value"],i={size:[40,20],target:!1,state:!1};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._state=new h(this.settings.state),this.init()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildInterface:{value:function(){this.bar=o.create("rect"),this.knob=o.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.height<this.width/2?this.knobSize=this.height/2:this.knobSize=this.width/4,this.bar.setAttribute("x",this.width/2-1.5*this.knobSize),this.bar.setAttribute("y",this.height/2-this.knobSize/2),this.bar.setAttribute("rx",this.knobSize/2),this.bar.setAttribute("ry",this.knobSize/2),this.bar.setAttribute("width",3*this.knobSize),this.bar.setAttribute("height",this.knobSize),this.knob.setAttribute("cx",this.width/2-this.knobSize),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobSize)}},colorInterface:{value:function(){this.knob.setAttribute("fill",this.colors.accent),this.render()}},render:{value:function(){this.state?(this.knob.setAttribute("cx",this.width/2+this.knobSize),this.bar.setAttribute("fill",this.colors.accent)):(this.knob.setAttribute("cx",this.width/2-this.knobSize),this.bar.setAttribute("fill",this.colors.fill))}},click:{value:function(){this.flip(),this.render(),this.emit("change",this.state)}},state:{get:function(){return this._state.state},set:function(t){this._state.flip(t),this.emit("change",this.state),this.render()}},flip:{value:function(){this._state.flip(),this.render()}}}),e}(i(6));t.exports=a},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(4),h=function(t){function e(){r(this,e);var t=["mode"],i={size:[80,80],mode:"aftertouch",state:!1};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.mode=this.settings.mode,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildInterface:{value:function(){this.pad=o.create("circle"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,this.defs=o.create("defs"),this.element.appendChild(this.defs),this.gradient=o.radialGradient(this.defs,2),this.gradient.stops[0].setAttribute("offset","30%"),this.gradient.stops[1].setAttribute("offset","100%")}},sizeInterface:{value:function(){this.pad.setAttribute("cx",this.width/2),this.pad.setAttribute("cy",this.height/2),this.pad.setAttribute("r",Math.min(this.width,this.height)/2-this.width/40),this.pad.setAttribute("stroke-width",this.width/20)}},colorInterface:{value:function(){this.gradient.stops[0].setAttribute("stop-color",this.colors.accent),this.gradient.stops[1].setAttribute("stop-color",this.colors.fill),this.render()}},render:{value:function(){this.state?("aftertouch"===this.mode?(this.pad.setAttribute("stroke","url(#"+this.gradient.id+")"),this.gradient.element.setAttribute("cx",100*this.position.x+"%"),this.gradient.element.setAttribute("cy",100*(1-this.position.y)+"%")):this.pad.setAttribute("stroke",this.colors.accent),this.pad.setAttribute("fill",this.colors.accent)):(this.pad.setAttribute("fill",this.colors.fill),this.pad.setAttribute("stroke",this.colors.mediumLight))}}}),e}(i(17));t.exports=h},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=i(4),o=i(5),h=i(13),a=function(t){function e(t,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,s),this.mode=this.settings.mode||"button",this.position={x:0,y:0},this._state=new h(this.settings.state)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildInterface:{value:function(){this.pad=r.create("circle"),this.pad.setAttribute("fill","#d18"),this.pad.setAttribute("stroke","#d18"),this.pad.setAttribute("stroke-width",4),this.element.appendChild(this.pad),this.interactionTarget=this.pad,this.sizeInterface()}},sizeInterface:{value:function(){this.pad.setAttribute("cx",this.width/2),this.pad.setAttribute("cy",this.height/2),this.pad.setAttribute("r",Math.min(this.width,this.height)/2-2)}},render:{value:function(){this.state?(this.pad.setAttribute("fill",this.colors.accent),this.pad.setAttribute("stroke",this.colors.accent)):(this.pad.setAttribute("fill",this.colors.fill),this.pad.setAttribute("stroke",this.colors.mediumLight))}},down:{value:function(t){switch(this.mode){case"impulse":this.turnOn(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.turnOff.bind(this),30);break;case"button":this.turnOn();break;case"aftertouch":this.position={x:o.clip(this.mouse.x/this.width,0,1),y:o.clip(1-this.mouse.y/this.height,0,1)},this.turnOn();break;case"toggle":this.flip(t)}}},bend:{value:function(t){"aftertouch"===this.mode&&(this.mouse=t||this.mouse,this.position={x:o.clip(this.mouse.x/this.width,0,1),y:o.clip(1-this.mouse.y/this.height,0,1)},this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}),this.render())}},up:{value:function(){switch(this.mode){case"button":this.turnOff();break;case"aftertouch":this.turnOff(),this.position={x:o.clip(this.mouse.x/this.width,0,1),y:o.clip(1-this.mouse.y/this.height,0,1)}}}},click:{value:function(){this.down()}},move:{value:function(){this.bend()}},release:{value:function(){this.up()}},state:{get:function(){return this._state.state},set:function(t){this._state.flip(t),"aftertouch"===this.mode?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state),this.render()}},flip:{value:function(t){this._state.flip(t),"aftertouch"===this.mode?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state),this.render()}},turnOn:{value:function(t){this._state.on(),!1!==t&&("aftertouch"===this.mode?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state)),this.render()}},turnOff:{value:function(t){this._state.off(),!1!==t&&("aftertouch"===this.mode?this.emit("change",{state:this.state,x:this.position.x,y:this.position.y}):this.emit("change",this.state)),this.render()}}}),e}(i(6));t.exports=a},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(t){function e(){r(this,e);var t=["value"],i={size:[150,50],state:!1,text:"Play"};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._text=this.settings.text,this.settings.alternate&&(this.settings.alternateText=this.settings.alternate,console.warn("'alternate' initiator is deprecated. Use 'alternateText' instead.")),this._alternateText=this.settings.alternateText,this.mode=this.settings.alternateText?"toggle":"button",this.init(),this.render(),this.state=this.settings.state}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("div"),this.parent.appendChild(this.element),this.textElement=document.createElement("div"),this.textElement.innerHTML=this._text,this.element.appendChild(this.textElement)}},buildInterface:{value:function(){}},colorInterface:{value:function(){this.element.style.color=this.colors.dark,this.render()}},sizeInterface:{value:function(){var t=this.height/3,e=this.width/(this._text.length+2);if(t=Math.min(t,e),this.alternateText){var i=this.width/(this.alternateText.length+2);t=Math.min(t,i)}var s="width: "+this.width+"px;";s+="height: "+this.height+"px;",s+="padding: "+(this.height-t)/2+"px 0px;",s+="box-sizing: border-box;",s+="text-align: center;",s+="font-family: inherit;",s+="font-weight: 700;",s+="opacity: 1;",s+="font-size:"+t+"px;",this.textElement.style.cssText=s,this.render()}},render:{value:function(){this.state?(this.element.style.backgroundColor=this.colors.accent,this.textElement.style.color=this.colors.fill,this.alternateText?this.textElement.innerHTML=this._alternateText:this.textElement.innerHTML=this._text):(this.element.style.backgroundColor=this.colors.fill,this.textElement.style.color=this.colors.dark,this.textElement.innerHTML=this._text)}},alternateText:{get:function(){return this._alternateText},set:function(t){this.mode=t?"toggle":"button",this._alternateText=t,this.render()}},text:{get:function(){return this._text},set:function(t){this._text=t,this.sizeInterface(),this.render()}}}),e}(i(17));t.exports=o},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(6),h=i(16),a=function(t){function e(){r(this,e);var t=["value"],i={size:[120,25],numberOfButtons:4,active:-1};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.buttons=[],this._numberOfButtons=this.settings.numberOfButtons,this.active=this.settings.active,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("div"),this.parent.appendChild(this.element)}},buildInterface:{value:function(){for(var t=0;t<this._numberOfButtons;t++){var e=document.createElement("span"),i=new h(e,{mode:"toggle",component:!0},this.update.bind(this,t));this.buttons.push(i),this.element.appendChild(e)}}},sizeInterface:{value:function(){for(var t=this.width/this._numberOfButtons,e=this.height,i=0;i<this._numberOfButtons;i++)this.buttons[i].resize(t,e)}},colorInterface:{value:function(){for(var t=0;t<this._numberOfButtons;t++)this.buttons[t].colors=this.colors,this.buttons[t].render()}},update:{value:function(t){this.buttons[t].state?this.select(t):this.deselect()}},render:{value:function(){for(var t=0;t<this.buttons.length;t++)t===this.active?this.buttons[t].turnOn(!1):this.buttons[t].turnOff(!1)}},select:{value:function(t){t>=0&&t<this.buttons.length&&(this.active=t,this.emit("change",this.active),this.render())}},deselect:{value:function(){this.active=-1,this.emit("change",this.active),this.render()}},numberOfButtons:{get:function(){return this._numberOfButtons},set:function(t){this._numberOfButtons=t;for(var e=0;e<this.buttons.length;e++)this.buttons[e].destroy();this.buttons=[],this.empty(),this.buildInterface()}}}),e}(o);t.exports=a},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(6),h=i(11),a=i(5),l=function(t){function e(){r(this,e);var t=["value"],i={size:[60,30],value:0,min:0,max:2e4,step:1};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._value=new h(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.decimalPlaces=2,this.actual=0,this.max=this._value.max,this.min=this._value.min,this.step=this._value.step,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("input"),this.element.type="text",this.element.addEventListener("blur",function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark,this.element.value!==this.value&&(this.value=parseFloat(this.element.value),this.render())}.bind(this)),this.element.addEventListener("keydown",function(t){(t.which<48||t.which>57)&&189!==t.which&&190!==t.which&&8!==t.which&&t.preventDefault(),13===t.which&&(this.element.blur(),this.value=this.element.value,this.emit("change",this.value),this.render())}.bind(this)),this.parent.appendChild(this.element)}},sizeInterface:{value:function(){this._minDimension=Math.min(this.width,this.height);var t="width: "+this.width+"px;";t+="height: "+this.height+"px;",t+="background-color: #e7e7e7;",t+="color: #333;",t+="font-family: arial;",t+="font-weight: 500;",t+="font-size:"+this._minDimension/2+"px;",t+="border: none;",t+="outline: none;",t+="padding: "+this._minDimension/4+"px "+this._minDimension/4+"px;",t+="box-sizing: border-box;",t+="userSelect: text;",t+="mozUserSelect: text;",t+="webkitUserSelect: text;",this.element.style.cssText+=t,this.element.value=this.value}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark}},render:{value:function(){this.element.value=a.prune(this.value,this.decimalPlaces)}},click:{value:function(){this.hasMoved=!1,this.element.readOnly=!0,this.actual=this.value,this.initial={y:this.mouse.y},this.changeFactor=a.invert(this.mouse.x/this.width),console.log(this.changeFactor)}},move:{value:function(){if(this.hasMoved=!0,this.clicked){var t=this.actual-(this.mouse.y-this.initial.y)*(a.clip(this.max-this.min,0,1e3)/200)*Math.pow(this.changeFactor,2);this.value=t,this.render(),this._value.changed&&this.emit("change",this.value)}}},release:{value:function(){this.hasMoved?document.body.focus():(this.element.readOnly=!1,this.element.focus(),this.element.setSelectionRange(0,this.element.value.length),this.element.style.backgroundColor=this.colors.accent,this.element.style.color=this.colors.light)}},link:{value:function(t){var e=this;this.min=t.min,this.max=t.max,this.step=t.step,t.on("change",(function(t){e.passiveUpdate(t)})),this.on("change",(function(e){t.value=e})),this.value=t.value}},passiveUpdate:{value:function(t){this._value.update(t),this.render()}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.emit("change",this.value),this.render()}},min:{get:function(){return this._value.min},set:function(t){this._value.min=t}},max:{get:function(){return this._value.max},set:function(t){this._value.max=t}},step:{get:function(){return this._value.step},set:function(t){this._value.step=t}}}),e}(o);t.exports=l},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(t){function e(){r(this,e);var t=["value"],i={size:[100,30],options:["default","options"]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._selectedIndex=-1,this._value=!1,this._options=this.settings.options,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("select"),this.element.style.fontSize=this.height/2+"px",this.element.style.outline="none",this.element.style.highlight="none",this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.boundRender=this.render.bind(this),this.element.addEventListener("change",this.boundRender),this.parent.appendChild(this.element)}},attachListeners:{value:function(){}},buildInterface:{value:function(){this.defineOptions()}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.element.style.color=this.colors.dark,this.element.style.border="solid 0px "+this.colors.mediumLight}},render:{value:function(){this._value=this.element.options[this.element.selectedIndex].text,this._selectedIndex=this.element.selectedIndex,this.emit("change",{value:this._value,index:this._selectedIndex})}},click:{value:function(){}},move:{value:function(){}},release:{value:function(){}},defineOptions:{value:function(t){t&&(this._options=t);for(var e=this.element.options.length-1;e>=0;e--)this.element.remove(e);for(e=0;e<this._options.length;e++)this.element.options.add(new Option(this._options[e],e))}},value:{get:function(){return this._value},set:function(t){this._value=t;for(var e=0;e<this.element.options.length;e++)if(t===this.element.options[e].text){this.selectedIndex=e;break}}},selectedIndex:{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this.element.selectedIndex=t,this.render()}},customDestroy:{value:function(){this.element.removeEventListener("change",this.boundRender)}}}),e}(i(6));t.exports=o},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(5),l=i(6),u=i(11),c=(s=i(12))&&s.__esModule?s:{default:s},f=function(t){function e(){o(this,e);var t=["min","max","value"],i={size:[75,75],interaction:"radial",mode:"relative",min:0,max:1,step:0,value:0};r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.interaction=this.settings.interaction,this._value=new u(this.settings.min,this.settings.max,this.settings.step,this.settings.value),this.position=new c.Handle(this.settings.mode,this.interaction,[0,this.width],[this.height,0]),this.init(),this.value=this._value.value,this.position.value=this._value.normalized,this.previousAngle=!1,this.emit("change",this.value)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.background=h.create("circle"),this.screw=h.create("circle"),this.handle=h.create("path"),this.handle2=h.create("path"),this.handleFill=h.create("path"),this.handle2Fill=h.create("path"),this.handleLine=h.create("path"),this.element.appendChild(this.background),this.element.appendChild(this.handle),this.element.appendChild(this.handle2),this.element.appendChild(this.handleFill),this.element.appendChild(this.handle2Fill),this.element.appendChild(this.handleLine),this.element.appendChild(this.screw)}},sizeInterface:{value:function(){this.position.resize([0,this.width],[this.height,0]);var t={x:this.width/2,y:this.height/2},e=Math.min(this.width,this.height);this.background.setAttribute("cx",t.x),this.background.setAttribute("cy",t.y),this.background.setAttribute("r",e/2-e/40),this.screw.setAttribute("cx",t.x),this.screw.setAttribute("cy",t.y),this.screw.setAttribute("r",e/12);var i=this.value,s={start:1.5*Math.PI,end:a.clip(a.scale(i,0,.5,1.5*Math.PI,.5*Math.PI),.5*Math.PI,1.5*Math.PI)},n={start:2.5*Math.PI,end:a.clip(a.scale(i,.5,1,2.5*Math.PI,1.5*Math.PI),1.5*Math.PI,2.5*Math.PI)},r=h.arc(t.x,t.y,e/2-e/40,s.start,s.end),o=h.arc(t.x,t.y,e/2-e/40,n.start,n.end);this.handle.setAttribute("d",r),this.handle.setAttribute("stroke-width",e/20),this.handle.setAttribute("fill","none"),this.handle2.setAttribute("d",o),this.handle2.setAttribute("stroke-width",e/20),this.handle2.setAttribute("fill","none"),r+=" L "+t.x+" "+t.y,this.handleFill.setAttribute("d",r),this.handleFill.setAttribute("fill-opacity","0.3"),o+=" L "+t.x+" "+t.y,this.handle2Fill.setAttribute("d",o),this.handle2Fill.setAttribute("fill-opacity","0.3");var l;l=i<.5?s.end:n.end;var u=t.x+Math.cos(l)*(e/2),c=t.y+Math.sin(l)*(e/2)*-1;this.handleLine.setAttribute("d","M "+t.x+" "+t.y+" L "+u+" "+c),this.handleLine.setAttribute("stroke-width",e/20)}},colorInterface:{value:function(){this.background.setAttribute("fill",this.colors.fill),this.screw.setAttribute("fill",this.colors.accent),this.handle.setAttribute("stroke",this.colors.accent),this.handle2.setAttribute("stroke",this.colors.accent),this.handleFill.setAttribute("fill",this.colors.accent),this.handle2Fill.setAttribute("fill",this.colors.accent),this.handleLine.setAttribute("stroke",this.colors.accent)}},render:{value:function(){var t=this._value.normalized,e={x:this.width/2,y:this.height/2},i=Math.min(this.width,this.height),s={start:1.5*Math.PI,end:a.clip(a.scale(t,0,.5,1.5*Math.PI,.5*Math.PI),.5*Math.PI,1.5*Math.PI)},n={start:2.5*Math.PI,end:a.clip(a.scale(t,.5,1,2.5*Math.PI,1.5*Math.PI),1.5*Math.PI,2.5*Math.PI)},r=h.arc(e.x,e.y,i/2-i/40,s.start,s.end),o=h.arc(e.x,e.y,i/2-i/40,n.start,n.end);this.handle.setAttribute("d",r),this.handle2.setAttribute("d",o),r+=" L "+e.x+" "+e.y,this.handleFill.setAttribute("d",r),o+=" L "+e.x+" "+e.y,this.handle2Fill.setAttribute("d",o);var l;l=t<=.5?s.end:n.end;var u=e.x+Math.cos(l)*(i/2),c=e.y+Math.sin(l)*(i/2)*-1;this.handleLine.setAttribute("d","M "+e.x+" "+e.y+" L "+u+" "+c)}},click:{value:function(){"relative"===this.mode&&(this.previousAngle=!1),this.position.anchor=this.mouse,this.position.value=this._value.normalized,this.move()}},move:{value:function(){if(this.clicked){this.position.update(this.mouse);var t=this.position.value*Math.PI*2;t<0&&(t+=2*Math.PI),"relative"===this.mode&&!1!==this.previousAngle&&Math.abs(this.previousAngle-t)>2&&(t=this.previousAngle>3?2*Math.PI:0),this.previousAngle=t;var e=t/(2*Math.PI);this.value=this._value.updateNormal(e),"relative"===this.mode&&(this.position.value=e),this.emit("change",this._value.value),this.render()}}},release:{value:function(){}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.position.value=this._value.normalized,this.emit("change",this._value.value),this.render()}},min:{get:function(){return this._value.min},set:function(t){this._value.min=t}},max:{get:function(){return this._value.max},set:function(t){this._value.max=t}},step:{get:function(){return this._value.step},set:function(t){this._value.step=t}},mode:{get:function(){return this.position.mode},set:function(t){this.position.mode=t}},normalized:{get:function(){return this._value.normalized},set:function(t){this._value.updateNormal(t),this.emit("change",this.value)}}}),e}(l);t.exports=f},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(6),l=i(17),u=i(9),c=function(t){function e(){o(this,e);var t=["value","note","color"],i={size:[80,80],target:!1,mode:"button",value:0};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.note=this.settings.note,this.color=this.settings.color,this.colors={w:"#fff",b:"#666"},this.init(),this.render()}return r(e,t),s(e,{buildFrame:{value:function(){this.element=h.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.parent.appendChild(this.element)}},buildInterface:{value:function(){var t=this;this.pad=h.create("rect"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,u.exists||(this.click=function(){t.piano.interacting=!0,t.piano.paintbrush=!t.state,t.down(t.piano.paintbrush)},this.pad.addEventListener("mouseover",(function(){t.piano.interacting&&t.down(t.piano.paintbrush)})),this.move=function(){t.piano.interacting&&t.bend()},this.release=function(){t.piano.interacting=!1},this.pad.addEventListener("mouseup",(function(){t.piano.interacting&&t.up()})),this.pad.addEventListener("mouseout",(function(){t.piano.interacting&&t.up()})))}},sizeInterface:{value:function(){this.pad.setAttribute("x",.5),this.pad.setAttribute("y",.5),this.width>2?this.pad.setAttribute("width",this.width-1):this.pad.setAttribute("width",this.width),this.height,this.pad.setAttribute("height",this.height),this.pad.setAttribute("rx",0),this.pad.setAttribute("ry",0)}},render:{value:function(){this.state?this.pad.setAttribute("fill",this.colors.accent):this.pad.setAttribute("fill",this.colors[this.color])}}}),e}(l),f=function(t){function e(){o(this,e);var t=["value"],i={size:[500,125],lowNote:24,highNote:60,mode:"button"};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.keyPattern=["w","b","w","b","w","w","b","w","b","w","b","w"],this.paintbrush=!1,this.mode=this.settings.mode,this.range={low:this.settings.lowNote,high:this.settings.highNote},this.range.size=this.range.high-this.range.low+1,this.keys=[],this.toggleTo=!1,this.init(),this.render()}return r(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("div"),this.element.style.position="relative",this.element.style.borderRadius="0px",this.element.style.display="block",this.element.style.width="100%",this.element.style.height="100%",this.parent.appendChild(this.element)}},buildInterface:{value:function(){this.keys=[];for(var t=0;t<this.range.size;t++){var e=document.createElement("span"),i=(t+this.range.low)%this.keyPattern.length,s=new c(e,{component:!0,note:t+this.range.low,color:this.keyPattern[i],mode:this.mode},this.keyChange.bind(this,t+this.range.low));s.piano=this,u.exists&&(s.pad.index=t,s.preClick=s.preMove=s.preRelease=function(){},s.click=s.move=s.release=function(){},s.preTouch=s.preTouchMove=s.preTouchRelease=function(){},s.touch=s.touchMove=s.touchRelease=function(){}),this.keys.push(s),this.element.appendChild(e)}u.exists&&this.addTouchListeners()}},sizeInterface:{value:function(){for(var t=0,e=[],i=0;i<this.range.size;i++){e.push(t);var s=(i+this.range.low)%this.keyPattern.length,n=(i+1+this.range.low)%this.keyPattern.length;i+1+this.range.low>=this.range.high||"w"===this.keyPattern[s]&&"w"===this.keyPattern[n]?t+=1:t+=.5}var r=t,o=(this.width-2)/r,h=(this.height-2)/2;for(i=0;i<this.keys.length;i++){var a=this.keys[i].parent;a.style.position="absolute",a.style.left=e[i]*o+1+"px","w"===this.keys[i].color?(a.style.top="1px",this.keys[i].resize(o,2*h)):(a.style.zIndex=1,a.style.top="1px",this.keys[i].resize(o,1.1*h))}}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.mediumLight;for(var t=0;t<this.keys.length;t++)this.keys[t].colors={w:this.colors.light,b:this.colors.dark,accent:this.colors.accent,border:this.colors.mediumLight},this.keys[t].colorInterface(),this.keys[t].render()}},keyChange:{value:function(t,e){var i={note:t};i.state="object"==typeof e?e.state:e,this.emit("change",i)}},render:{value:function(){}},addTouchListeners:{value:function(){var t=this;this.preClick=this.preMove=this.preRelease=function(){},this.click=this.move=this.release=function(){},this.preTouch=this.preTouchMove=this.preTouchRelease=function(){},this.touch=this.touchMove=this.touchRelease=function(){},this.currentElement=!1,this.element.addEventListener("touchstart",(function(e){console.log("touchstart");var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.keys[i.index];t.paintbrush=!s.state,s.down(t.paintbrush),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchmove",(function(e){var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.keys[i.index];i.index!==t.currentElement?(t.currentElement&&t.keys[t.currentElement].up(),s.down(t.paintbrush)):s.bend(),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchend",(function(e){t.keys[t.currentElement].up(),t.interacting=!1,t.currentElement=!1,e.preventDefault(),e.stopPropagation()}))}},setRange:{value:function(t,e){this.range.low=t,this.range.high=e,this.empty(),this.buildInterface()}},toggleKey:{value:function(t,e){this.keys[t-this.range.low].flip(e)}},toggleIndex:{value:function(t,e){this.keys[t].flip(e)}}}),e}(a);t.exports=f},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(7),l=i(6),u=i(17),c=i(25),f=i(28),d=i(9),v=function(t){function e(){o(this,e);var t=["value"],i={size:[80,80],target:!1,mode:"toggle",value:0};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.index=this.settings.index,this.row=this.settings.row,this.column=this.settings.column,this.matrix=this.settings.matrix,this.interacting=!1,this.paintbrush=!1,this.init(),this.render()}return r(e,t),s(e,{buildFrame:{value:function(){this.element=h.create("svg"),this.element.setAttribute("width",this.width),this.element.setAttribute("height",this.height),this.element.style.top="0px",this.element.style.left="0px",this.element.style.position="absolute",this.parent.appendChild(this.element)}},buildInterface:{value:function(){var t=this;this.pad=h.create("rect"),this.element.appendChild(this.pad),this.interactionTarget=this.pad,d.exists||(this.click=function(){t.matrix.interacting=!0,t.matrix.paintbrush=!t.state,t.down(t.matrix.paintbrush)},this.pad.addEventListener("mouseover",(function(){t.matrix.interacting&&t.down(t.matrix.paintbrush)})),this.move=function(){},this.pad.addEventListener("mousemove",(function(e){t.matrix.interacting&&(t.offset||(t.offset=a.findPosition(t.element)),t.mouse=a.locateMouse(e,t.offset),t.bend())})),this.release=function(){t.matrix.interacting=!1},this.pad.addEventListener("mouseup",(function(){t.matrix.interacting&&t.up()})),this.pad.addEventListener("mouseout",(function(){t.matrix.interacting&&t.up()})))}},sizeInterface:{value:function(){this.pad.setAttribute("x",1),this.pad.setAttribute("y",1),this.width>2?this.pad.setAttribute("width",this.width-2):this.pad.setAttribute("width",this.width),this.height>2?this.pad.setAttribute("height",this.height-2):this.pad.setAttribute("height",this.height),this.pad.setAttribute("fill",this.matrix.colors.fill)}},render:{value:function(){this.state?this.pad.setAttribute("fill",this.matrix.colors.accent):this.pad.setAttribute("fill",this.matrix.colors.fill)}}}),e}(u),p=function(t){function e(){o(this,e);var t=["value"],i={size:[400,200],mode:"toggle",rows:5,columns:10};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.active=-1,this.mode=this.settings.mode,this.interval=new Nexus.Interval(200,(function(){}),!1),this.matrix=new c(this.settings.rows,this.settings.columns),this.matrix.ui=this,this.stepper=new f(0,this.columns),this.init()}return r(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("div"),this.element.style.position="relative",this.element.style.display="block",this.element.style.width="100%",this.element.style.height="100%",this.parent.appendChild(this.element),d.exists&&this.addTouchListeners()}},buildInterface:{value:function(){this.cells=[];for(var t=0;t<this.matrix.length;t++){var e=this.matrix.locate(t),i=document.createElement("span");i.style.position="absolute";var s=new v(i,{component:!0,index:t,row:e.row,column:e.column,mode:this.mode,matrix:this},this.keyChange.bind(this,t));d.exists&&(s.pad.index=t,s.preClick=s.preMove=s.preRelease=function(){},s.click=s.move=s.release=function(){},s.preTouch=s.preTouchMove=s.preTouchRelease=function(){},s.touch=s.touchMove=s.touchRelease=function(){}),this.cells.push(s),this.element.appendChild(i)}this.sizeInterface()}},sizeInterface:{value:function(){for(var t=this.width/this.columns,e=this.height/this.rows,i=0;i<this.cells.length;i++){var s=this.cells[i].parent;s.style.left=this.cells[i].column*t+"px",s.style.top=this.cells[i].row*e+"px",this.cells[i].resize(t,e)}}},colorInterface:{value:function(){for(var t=0;t<this.cells.length;t++)this.cells[t].render()}},update:{value:function(){var t=this;this.matrix.iterate((function(e,i,s){t.matrix.pattern[e][i]!==t.cells[s].state&&(t.matrix.pattern[e][i]>0?t.cells[s].turnOn():t.cells[s].turnOff())}))}},keyChange:{value:function(t,e){var i=this.matrix.locate(t);this.matrix.pattern[i.row][i.column]=e;var s={row:i.row,column:i.column,state:e};this.emit("change",s)}},render:{value:function(){var t=this;this.stepper.value>=0&&this.matrix.iterate((function(e,i,s){i===t.stepper.value?(t.cells[s].pad.setAttribute("stroke",t.colors.mediumLight),t.cells[s].pad.setAttribute("stroke-width","1"),t.cells[s].pad.setAttribute("stroke-opacity","1")):t.cells[s].pad.setAttribute("stroke","none")}))}},start:{value:function(t){this.interval.event=this.next.bind(this),t&&this.interval.ms(t),this.interval.start()}},stop:{value:function(){this.interval.stop()}},next:{value:function(){this.stepper.next(),this.emit("step",this.matrix.column(this.stepper.value).reverse()),this.render()}},addTouchListeners:{value:function(){var t=this;this.preClick=this.preMove=this.preRelease=function(){},this.click=this.move=this.release=function(){},this.preTouch=this.preTouchMove=this.preTouchRelease=function(){},this.touch=this.touchMove=this.touchRelease=function(){},this.currentElement=!1,this.element.addEventListener("touchstart",(function(e){var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.cells[i.index];t.paintbrush=!s.state,s.down(t.paintbrush),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchmove",(function(e){var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.cells[i.index];i.index!==t.currentElement?(t.currentElement>=0&&t.cells[t.currentElement].up(),s.down(t.paintbrush)):s.bend(),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchend",(function(e){t.cells[t.currentElement].up(),t.interacting=!1,t.currentElement=!1,e.preventDefault(),e.stopPropagation()}))}},rows:{get:function(){return this.matrix.rows},set:function(t){this.matrix.rows=t,this.empty(),this.buildInterface(),this.update()}},columns:{get:function(){return this.matrix.columns},set:function(t){this.matrix.columns=t,this.stepper.max=t,this.empty(),this.buildInterface(),this.update()}}}),e}(l);t.exports=p},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t},n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=s(i(5)),o=s(i(26)),h=function(){function t(e,i){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pattern=[],this.create(e,i),this.toggle={cell:function(t,e){return s.pattern[e][t]=!s.pattern[e][t],s.ui&&s.ui.update(),s.pattern[e][t]},all:function(){s.iterate((function(t,e){s.toggle.cell(e,t)})),s.ui&&s.ui.update()},row:function(t){for(var e=0;e<s.columns;e++)s.toggle.cell(e,t);s.ui&&s.ui.update()},column:function(t){for(var e=0;e<s.rows;e++)s.toggle.cell(t,e);s.ui&&s.ui.update()}},this.set={cell:function(t,e,i){s.pattern[e][t]=i,s.ui&&s.ui.update()},all:function(t){s.pattern=t,s.ui&&s.ui.update()},row:function(t,e){s.pattern[t]=e,s.ui&&s.ui.update()},column:function(t,e){s.pattern.forEach((function(i,n){s.pattern[n][t]=e[n]})),s.ui&&s.ui.update()}},this.rotate={all:function(t){t||0===t||(t=1),(t%=s.pattern[0].length)<0&&(t=s.pattern[0].length+t);for(var e=0;e<s.rows;e++){var i=s.pattern[e].splice(s.pattern[e].length-t,t);s.pattern[e]=i.concat(s.pattern[e])}s.ui&&s.ui.update()},row:function(t,e){e||0===e||(e=1),(e%=s.pattern[0].length)<0&&(e=s.pattern[0].length+e);var i=s.pattern[t].splice(s.pattern[t].length-e,e);s.pattern[t]=i.concat(s.pattern[t]),s.ui&&s.ui.update()},column:function(t,e){e||0===e||(e=1),(e%=s.pattern.length)<0&&(e=s.pattern.length+e);var i=[];s.pattern.forEach((function(e){i.push(e[t])}));var n=i.splice(i.length-e,e);i=n.concat(i),s.pattern.forEach((function(e,s){e[t]=i[s]})),s.ui&&s.ui.update()}},this.populate={all:function(t){var e=new o(t);s.iterate((function(t,i){s.pattern[t][i]=r.coin(e.next())})),s.ui&&s.ui.update()},row:function(){var t=void 0===arguments[0]?0:arguments[0],e=void 0===arguments[1]?1:arguments[1],i=new o(e);s.pattern[t].forEach((function(e,n){s.pattern[t][n]=r.coin(i.next())})),s.ui&&s.ui.update()},column:function(){var t=void 0===arguments[0]?0:arguments[0],e=void 0===arguments[1]?1:arguments[1],i=new o(e);s.pattern.forEach((function(e,n){s.pattern[n][t]=r.coin(i.next())})),s.ui&&s.ui.update()}},this.erase={all:function(){s.set.all(0)},row:function(t){s.set.row(t,0)},column:function(t){s.set.column(t,0)}}}var e,i,s,h;return n(t,{create:{value:function(t,e){var i=this;this.pattern=[];for(var s=0;s<t;s++){var n=new Array(e);this.pattern.push(n)}this.iterate((function(t,e){i.pattern[t][e]=!1}))}},iterate:{value:function(t,e){for(var i=0,s=0;s<this.rows;s++){e&&e(s);for(var n=0;n<this.columns;n++)t(s,n,i),i++}}},formatAsText:{value:function(){var t=this,e="";return this.iterate((function(i,s){e+=(t.pattern[i][s]?1:0)+" "}),(function(){e+="\n"})),e}},log:{value:function(){console.log(this.formatAsText())}},update:{value:function(t){this.pattern=t||this.pattern}},length:{get:function(){return this.rows*this.columns}},locate:{value:function(t){return{row:~~(t/this.columns),column:t%this.columns}}},indexOf:{value:function(t,e){return e+t*this.columns}},row:{value:(s=function(t){for(var e=[],i=0;i<this.columns;i++)e.push(this.pattern[t]?1:0);return e},h=function(t){return s.apply(this,arguments)},h.toString=function(){return s.toString()},h)},column:{value:(e=function(t){for(var e=[],i=0;i<this.rows;i++)e.push(this.pattern[i][t]?1:0);return e},i=function(t){return e.apply(this,arguments)},i.toString=function(){return e.toString()},i)},rows:{get:function(){return this.pattern.length},set:function(t){var e=this,i=this.pattern.slice(0);this.create(t,this.columns),this.iterate((function(t,s){i[t]&&i[t][s]&&(e.pattern[t][s]=i[t][s])}))}},columns:{get:function(){return this.pattern[0].length},set:function(t){var e=this,i=this.pattern.slice(0);this.create(this.rows,t),this.iterate((function(t,s){i[t]&&i[t][s]&&(e.pattern[t][s]=i[t][s])}))}}}),t}();t.exports=h},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t},n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=s(i(5)),h=s(i(27)),a=function(){function t(){var e=void 0===arguments[0]?[0,10,20,30]:arguments[0],i=void 0===arguments[1]?"up":arguments[1],s=void 0!==arguments[2]&&arguments[2];r(this,t),this.values=e,Array.isArray(this.values)||(this.values=[this.values]),this._mode=i,this.position=s,this.drunkWalk=new h(0,this.values.length-1),this.startValues={up:0,down:this.values.length-1,drunk:~~(this.values.length/2),random:o.ri(this.values.length)},!1!==this.position?this.next=this[this._mode]:this.next=this.first}return n(t,{mode:{get:function(){return this._mode},set:function(t){"up"===t||"down"===t||"random"===t||"drunk"===t?(this._mode=t,this.position&&(this.next=this[this._mode])):console.error("The only modes currently allowed are: up, down, random, drunk")}},value:{get:function(){return this.values[this.position]},set:function(t){this.position=this.values.indexOf(t)}},first:{value:function(){return!1!==this.position?(this.next=this[this._mode],this.next()):(this.position=this.startValues[this._mode],this.next=this[this._mode],this.value)}},up:{value:function(){return this.position++,this.position%=this.values.length,this.value}},down:{value:function(){return this.position--,this.position<0&&(this.position=(this.position+this.values.length)%this.values.length),this.value}},random:{value:function(){return this.position=o.ri(0,this.values.length),this.value}},drunk:{value:function(){return this.drunkWalk.max=this.values.length,this.drunkWalk.value=this.position,this.position=this.drunkWalk.next(),this.value}}}),t}();t.exports=a},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=(s=i(5))&&s.__esModule?s.default:s,h=function(){function t(){var e=void 0===arguments[0]?0:arguments[0],i=void 0===arguments[1]?9:arguments[1],s=void 0===arguments[2]?0:arguments[2],n=void 0===arguments[3]?1:arguments[3],o=void 0!==arguments[4]&&arguments[4];r(this,t),this.min=e,this.max=i,this.value=s,this.increment=n,this.loop=o}return n(t,{next:{value:function(){return this.value+=o.pick(-1*this.increment,this.increment),this.value>this.max&&(this.loop?this.value=this.min:this.value=this.max-this.increment),this.value<this.min&&(this.loop?this.value=this.max:this.value=this.min+this.increment),this.value}}}),t}();t.exports=h},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t},n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=s(i(5)),h=s(i(27)),a=function(){function t(){var e=void 0===arguments[0]?0:arguments[0],i=void 0===arguments[1]?10:arguments[1],s=void 0===arguments[2]?"up":arguments[2],n=void 0!==arguments[3]&&arguments[3];r(this,t),this.min=e,this.max=i,this.value=n,this.mode=s,this.drunkWalk=new h(this.min,this.max),!1!==this.value?this.next=this[this._mode]:this.next=this.first}return n(t,{mode:{set:function(t){"up"===t||"down"===t||"random"===t||"drunk"===t?(this._mode=t,this.value&&(this.next=this[this._mode])):console.error("The only modes currently allowed are: up, down, random, drunk")},get:function(){return this._mode}},first:{value:function(){return!1!==this.value?(this.next=this[this._mode],this.next()):(this.startValues={up:this.min,down:this.max,drunk:~~o.average(this.min,this.max),random:o.ri(this.min,this.max)},this.value=this.startValues[this._mode],this.next=this[this._mode],this.value)}},up:{value:function(){return this.value++,this.value>=this.max&&(this.value=this.min),this.value}},down:{value:function(){return this.value--,this.value<this.min&&(this.value=this.max),this.value}},random:{value:function(){return this.value=o.ri(this.min,this.max),this.value}},drunk:{value:function(){return this.drunkWalk.min=this.min,this.drunkWalk.max=this.max,this.drunkWalk.value=this.value,this.value=this.drunkWalk.next(),this.value}}}),t}();t.exports=a},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(5),l=i(6),u=i(11),c=(s=i(12))&&s.__esModule?s:{default:s},f=function(t){function e(){o(this,e);var t=["range"],i={size:[200,200],range:.5,mode:"absolute",speakers:[[.5,.2],[.75,.25],[.8,.5],[.75,.75],[.5,.8],[.25,.75],[.2,.5],[.25,.25]]};r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.value={x:new u(0,1,0,.5),y:new u(0,1,0,.5)},this.mode=this.settings.mode,this.position={x:new c.Handle(this.mode,"horizontal",[0,this.width],[this.height,0]),y:new c.Handle(this.mode,"vertical",[0,this.width],[this.height,0])},this.position.x.value=this.value.x.normalized,this.position.y.value=this.value.y.normalized,this.speakers=this.settings.speakers,this.range=this.settings.range,this.levels=[],this.init(),this.calculateLevels(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.knob=h.create("circle"),this.element.appendChild(this.knob),this.speakerElements=[];for(var t=0;t<this.speakers.length;t++){var e=h.create("circle");this.element.appendChild(e),this.speakerElements.push(e)}}},sizeInterface:{value:function(){this._minDimension=Math.min(this.width,this.height),this.knobRadius={off:3*~~(this._minDimension/100)+5},this.knobRadius.on=2*this.knobRadius.off,this.knob.setAttribute("cx",this.width/2),this.knob.setAttribute("cy",this.height/2),this.knob.setAttribute("r",this.knobRadius.off);for(var t=0;t<this.speakers.length;t++){var e=this.speakerElements[t],i=this.speakers[t];e.setAttribute("cx",i[0]*this.width),e.setAttribute("cy",i[1]*this.height),e.setAttribute("r",this._minDimension/20+5),e.setAttribute("fill-opacity","0")}this.position.x.resize([0,this.width],[this.height,0]),this.position.y.resize([0,this.width],[this.height,0]),this.calculateLevels(),this.render()}},colorInterface:{value:function(){this.element.style.backgroundColor=this.colors.fill,this.knob.setAttribute("fill",this.colors.mediumLight);for(var t=0;t<this.speakers.length;t++){var e=this.speakerElements[t];e.setAttribute("fill",this.colors.accent),e.setAttribute("stroke",this.colors.accent)}}},render:{value:function(){this.knobCoordinates={x:this.value.x.normalized*this.width,y:this.height-this.value.y.normalized*this.height},this.knob.setAttribute("cx",this.knobCoordinates.x),this.knob.setAttribute("cy",this.knobCoordinates.y)}},click:{value:function(){this.position.x.anchor=this.mouse,this.position.y.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.x.update(this.mouse),this.position.y.update(this.mouse),this.calculateLevels(),this.emit("change",this.levels),this.render())}},release:{value:function(){this.render()}},normalized:{get:function(){return{x:this.value.x.normalized,y:this.value.y.normalized}}},calculateLevels:{value:function(){var t=this;this.value.x.updateNormal(this.position.x.value),this.value.y.updateNormal(this.position.y.value),this.levels=[],this.speakers.forEach((function(e,i){var s=a.distance(e[0]*t.width,e[1]*t.height,t.position.x.value*t.width,(1-t.position.y.value)*t.height),n=a.clip(1-s/(t.range*t.width),0,1);t.levels.push(n),t.speakerElements[i].setAttribute("fill-opacity",n)}))}},moveSource:{value:function(t,e){var i={x:t*this.width,y:e*this.height};this.position.x.update(i),this.position.y.update(i),this.calculateLevels(),this.emit("change",this.levels),this.render()}},moveSpeaker:{value:function(t,e,i){this.speakers[t]=[e,i],this.speakerElements[t].setAttribute("cx",e*this.width),this.speakerElements[t].setAttribute("cy",i*this.height),this.calculateLevels(),this.emit("change",this.levels),this.render()}}}),e}(l);t.exports=f},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(5),h=i(4),a=function(t){function e(){r(this,e);var t=["value"],i={size:[80,80]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._active=!0,this.init(),this.boundUpdate=this.update.bind(this),window.DeviceOrientationEvent?this.orientationListener=window.addEventListener("deviceorientation",this.boundUpdate,!1):(this._active=!1,this.colorInterface())}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildInterface:{value:function(){this.title=h.create("text"),this.circleX=h.create("circle"),this.circleY=h.create("circle"),this.circleZ=h.create("circle"),this.barX=h.create("path"),this.barY=h.create("path"),this.barZ=h.create("path"),this.barX2=h.create("path"),this.barY2=h.create("path"),this.barZ2=h.create("path"),this.barX.setAttribute("opacity","0.8"),this.barY.setAttribute("opacity","0.8"),this.barZ.setAttribute("opacity","0.8"),this.barX2.setAttribute("opacity","0.8"),this.barY2.setAttribute("opacity","0.8"),this.barZ2.setAttribute("opacity","0.8"),this.circleX.setAttribute("cx",3*this.width/12),this.circleX.setAttribute("cy",3*this.height/4),this.circleX.setAttribute("r",this.height/10),this.circleX.setAttribute("opacity","0.4"),this.circleY.setAttribute("cx",6*this.width/12),this.circleY.setAttribute("cy",3*this.height/4),this.circleY.setAttribute("r",this.height/10),this.circleY.setAttribute("opacity","0.4"),this.circleZ.setAttribute("cx",9*this.width/12),this.circleZ.setAttribute("cy",3*this.height/4),this.circleZ.setAttribute("r",this.height/10),this.circleZ.setAttribute("opacity","0.4"),this.barX.setAttribute("stroke-width",Math.round(this.height/30)),this.barY.setAttribute("stroke-width",Math.round(this.height/30)),this.barZ.setAttribute("stroke-width",Math.round(this.height/30)),this.barX.setAttribute("fill","none"),this.barY.setAttribute("fill","none"),this.barZ.setAttribute("fill","none"),this.barX2.setAttribute("stroke-width",Math.round(this.height/30)),this.barY2.setAttribute("stroke-width",Math.round(this.height/30)),this.barZ2.setAttribute("stroke-width",Math.round(this.height/30)),this.barX2.setAttribute("fill","none"),this.barY2.setAttribute("fill","none"),this.barZ2.setAttribute("fill","none"),this.title.setAttribute("x",this.width/2),this.title.setAttribute("y",this.height/3+7),this.title.setAttribute("font-size","15px"),this.title.setAttribute("font-weight","bold"),this.title.setAttribute("letter-spacing","2px"),this.title.setAttribute("opacity","0.7"),this.title.setAttribute("text-anchor","middle"),this.title.textContent="TILT",this.element.appendChild(this.circleX),this.element.appendChild(this.circleY),this.element.appendChild(this.circleZ),this.element.appendChild(this.barX),this.element.appendChild(this.barY),this.element.appendChild(this.barZ),this.element.appendChild(this.barX2),this.element.appendChild(this.barY2),this.element.appendChild(this.barZ2),this.element.appendChild(this.title)}},colorInterface:{value:function(){this._active?(this.element.style.backgroundColor=this.colors.accent,this.circleX.setAttribute("fill",this.colors.light),this.circleY.setAttribute("fill",this.colors.light),this.circleZ.setAttribute("fill",this.colors.light),this.circleX.setAttribute("stroke",this.colors.light),this.circleY.setAttribute("stroke",this.colors.light),this.circleZ.setAttribute("stroke",this.colors.light),this.barX.setAttribute("stroke",this.colors.light),this.barY.setAttribute("stroke",this.colors.light),this.barZ.setAttribute("stroke",this.colors.light),this.barX2.setAttribute("stroke",this.colors.light),this.barY2.setAttribute("stroke",this.colors.light),this.barZ2.setAttribute("stroke",this.colors.light),this.title.setAttribute("fill",this.colors.light)):(this.element.style.backgroundColor=this.colors.fill,this.circleX.setAttribute("fill",this.colors.mediumLight),this.circleY.setAttribute("fill",this.colors.mediumLight),this.circleZ.setAttribute("fill",this.colors.mediumLight),this.circleX.setAttribute("stroke",this.colors.mediumLight),this.circleY.setAttribute("stroke",this.colors.mediumLight),this.circleZ.setAttribute("stroke",this.colors.mediumLight),this.barX.setAttribute("stroke",this.colors.mediumLight),this.barY.setAttribute("stroke",this.colors.mediumLight),this.barZ.setAttribute("stroke",this.colors.mediumLight),this.barX2.setAttribute("stroke",this.colors.mediumLight),this.barY2.setAttribute("stroke",this.colors.mediumLight),this.barZ2.setAttribute("stroke",this.colors.mediumLight),this.title.setAttribute("fill",this.colors.mediumLight))}},update:{value:function(t){if(this._active){var e=t.beta,i=t.gamma,s=t.alpha;i=o.scale(i,-90,90,0,1),e=o.scale(e,-90,90,0,1),s=o.scale(s,0,360,0,1);var n={start:1.5*Math.PI,end:o.clip(o.scale(i,0,.5,1.5*Math.PI,.5*Math.PI),.5*Math.PI,1.5*Math.PI)},r={start:2.5*Math.PI,end:o.clip(o.scale(i,.5,1,2.5*Math.PI,1.5*Math.PI),1.5*Math.PI,2.5*Math.PI)},a=h.arc(this.circleX.cx.baseVal.value,this.circleX.cy.baseVal.value,this.circleX.r.baseVal.value,n.start,n.end),l=h.arc(this.circleX.cx.baseVal.value,this.circleX.cy.baseVal.value,this.circleX.r.baseVal.value,r.start,r.end);this.barX.setAttribute("d",a),this.barX2.setAttribute("d",l),n={start:1.5*Math.PI,end:o.clip(o.scale(e,0,.5,1.5*Math.PI,.5*Math.PI),.5*Math.PI,1.5*Math.PI)},r={start:2.5*Math.PI,end:o.clip(o.scale(e,.5,1,2.5*Math.PI,1.5*Math.PI),1.5*Math.PI,2.5*Math.PI)},a=h.arc(this.circleY.cx.baseVal.value,this.circleY.cy.baseVal.value,this.circleY.r.baseVal.value,n.start,n.end),l=h.arc(this.circleY.cx.baseVal.value,this.circleY.cy.baseVal.value,this.circleY.r.baseVal.value,r.start,r.end),this.barY.setAttribute("d",a),this.barY2.setAttribute("d",l),n={start:1.5*Math.PI,end:o.clip(o.scale(s,0,.5,1.5*Math.PI,.5*Math.PI),.5*Math.PI,1.5*Math.PI)},r={start:2.5*Math.PI,end:o.clip(o.scale(s,.5,1,2.5*Math.PI,1.5*Math.PI),1.5*Math.PI,2.5*Math.PI)},a=h.arc(this.circleZ.cx.baseVal.value,this.circleZ.cy.baseVal.value,this.circleZ.r.baseVal.value,n.start,n.end),l=h.arc(this.circleZ.cx.baseVal.value,this.circleZ.cy.baseVal.value,this.circleZ.r.baseVal.value,r.start,r.end),this.barZ.setAttribute("d",a),this.barZ2.setAttribute("d",l),this.emit("change",{x:i,y:e,z:s})}}},click:{value:function(){window.DeviceOrientationEvent&&(this.active=!this.active)}},active:{get:function(){return this._active},set:function(t){this._active=t,this.colorInterface()}},customDestroy:{value:function(){window.removeEventListener("deviceorientation",this.boundUpdate,!1)}}}),e}(i(6));t.exports=a},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(7),a=i(5),l=i(6),u=i(32),c=i(9),f=function(t){function e(){var t=this;o(this,e);var i=["scale","value"],s={size:[120,20],orientation:"vertical",mode:"absolute",scale:[0,1],step:0,value:0,hasKnob:!0};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,i,s),c.exists||(this.click=function(){t.multislider.interacting=!0,t.multislider.interpolation={index:t.index,value:t.value},t.down(),t.multislider.values[t.index]=t.value},this.element.addEventListener("mouseover",(function(e){if(t.multislider.interacting){if(t.offset||(t.offset=h.findPosition(t.element)),t.mouse=h.locateMouse(e,t.offset),t.down(),t.multislider.values[t.index]=t.value,t.multislider.interpolation){var i=Math.abs(t.multislider.interpolation.index-t.index);if(i>1)for(var s=Math.min(t.multislider.interpolation.index,t.index),n=Math.max(t.multislider.interpolation.index,t.index),r=t.multislider.sliders[s].value,o=t.multislider.sliders[n].value,l=s;l<n;l++){t.multislider.sliders[l].value=a.interp((l-s)/i,r,o);var u=t.multislider.sliders[l].value;t.multislider.values[l]=u,t.multislider.update(l,u)}}t.multislider.interpolation={index:t.index,value:t.value}}})),this.move=function(){},this.element.addEventListener("mousemove",(function(e){t.multislider.interacting&&(t.offset||(t.offset=h.findPosition(t.element)),t.mouse=h.locateMouse(e,t.offset),t.slide(),t.multislider.values[t.index]=t.value)})),this.release=function(){t.multislider.interacting=!1,t.multislider.interpolation=!1},this.element.addEventListener("mouseup",(function(){t.multislider.interacting&&(t.up(),t.multislider.interpolation=!1,t.multislider.values[t.index]=t.value)})),this.element.addEventListener("mouseout",(function(){t.multislider.interacting&&(t.up(),t.multislider.values[t.index]=t.value)}))),this.customStyle()}return r(e,t),s(e,{customStyle:{value:function(){this.bar.setAttribute("x",0),this.bar.setAttribute("transform","translate(0,0)"),this.bar.setAttribute("rx",0),this.bar.setAttribute("ry",0),this.bar.setAttribute("width",this.width),this.bar.setAttribute("height",this.height),this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("transform","translate(0,0)"),this.fillbar.setAttribute("rx",0),this.fillbar.setAttribute("ry",0),this.fillbar.setAttribute("width",this.width),this.fillbar.setAttribute("height",this.height)}}}),e}(u),d=function(t){function e(){o(this,e);var t=["value"],i={size:[200,100],numberOfSliders:5,min:0,max:1,step:0,values:[.7,.7,.7,.7,.7]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this._numberOfSliders=this.settings.numberOfSliders,this.values=this.settings.values,this.sliders=[],this.interacting=!1,this.init()}return r(e,t),s(e,{buildFrame:{value:function(){this.element=document.createElement("div"),this.parent.appendChild(this.element)}},buildInterface:{value:function(){var t=this.settings.min,e=this.settings.max,i=this.settings.step;this.sliders.length&&(t=this.sliders[0].min,e=this.sliders[0].max,i=this.sliders[0].step),this.sliders=[];for(var s=0;s<this._numberOfSliders;s++){var n=document.createElement("span"),r=new f(n,{scale:[t,e],step:i,mode:"absolute",orientation:"vertical",value:this.values[s],hasKnob:!1,component:!0},this.update.bind(this,s));r.multislider=this,r.index=s,c.exists&&(r.bar.index=s,r.fillbar.index=s,r.preClick=r.preMove=r.preRelease=function(){},r.click=r.move=r.release=function(){},r.preTouch=r.preTouchMove=r.preTouchRelease=function(){},r.touch=r.touchMove=r.touchRelease=function(){}),this.sliders.push(r),this.element.appendChild(n)}c.exists&&this.addTouchListeners()}},colorInterface:{value:function(){for(var t=0;t<this.sliders.length;t++)this.sliders[t].colors=this.colors,this.sliders[t].colorInterface()}},sizeInterface:{value:function(){for(var t=this.width/this.sliders.length,e=this.height,i=0;i<this.sliders.length;i++)this.sliders[i].resize(t,e),this.sliders[i].customStyle()}},update:{value:function(t,e){this.emit("change",{index:t,value:e})}},addTouchListeners:{value:function(){var t=this;this.preClick=this.preMove=this.preRelease=function(){},this.click=this.move=this.release=function(){},this.preTouch=this.preTouchMove=this.preTouchRelease=function(){},this.touch=this.touchMove=this.touchRelease=function(){},this.currentElement=!1,this.element.addEventListener("touchstart",(function(e){var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.sliders[i.index];s.offset||(s.offset=h.findPosition(s.element)),s.mouse=h.locateMouse(e,s.offset),s.down(),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchmove",(function(e){var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY),s=t.sliders[i.index];s.offset||(s.offset=h.findPosition(s.element)),s.mouse=h.locateMouse(e,s.offset),i.index!==t.currentElement?(t.currentElement>=0&&t.sliders[t.currentElement].up(),s.down()):s.slide(),t.currentElement=i.index,e.preventDefault(),e.stopPropagation()})),this.element.addEventListener("touchend",(function(e){t.sliders[t.currentElement].up(),t.interacting=!1,t.currentElement=!1,e.preventDefault(),e.stopPropagation()}))}},numberOfSliders:{get:function(){return this.sliders.length},set:function(t){t!==this.sliders.length&&(this.sliders.forEach((function(t){t.destroy()})),this.empty(),this._numberOfSliders=t,this.buildInterface())}},min:{get:function(){return this.sliders[0].min},set:function(t){this.sliders.forEach((function(e){e.min=t}))}},max:{get:function(){return this.sliders[0].max},set:function(t){this.sliders.forEach((function(e){e.max=t}))}},step:{get:function(){return this.sliders[0].step},set:function(t){this.sliders.forEach((function(e){e.step=t}))}},setSlider:{value:function(t,e){this.sliders[t].value=e,this.emit("change",{index:t,value:e})}},setAllSliders:{value:function(t){var e=this;this.values=t,this.sliders.forEach((function(i,s){i.value=t[s%t.length],e.emit("change",{index:s,value:i.value})}))}}}),e}(l);t.exports=d},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=i(4),h=i(6),a=i(11),l=(s=i(12))&&s.__esModule?s:{default:s},u=function(t){function e(t,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,i,s),this.orientation=this.settings.orientation,this.hasKnob=this.settings.hasKnob,this._value=new a(this.settings.scale[0],this.settings.scale[1],this.settings.step,this.settings.value),this.init(),this.position=new l.Handle(this.settings.mode,this.orientation,[0,this.width],[this.height,0]),this.position.value=this._value.normalized,this.value=this._value.value,this.emit("change",this.value)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.bar=o.create("rect"),this.fillbar=o.create("rect"),this.knob=o.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.fillbar),this.element.appendChild(this.knob),this.sizeInterface()}},sizeInterface:{value:function(){this.settings.orientation||(this.width<this.height?this.orientation="vertical":this.orientation="horizontal");var t=void 0,e=void 0,i=void 0,s=void 0,n=void 0,r=void 0;this.knobData={level:0,r:0},"vertical"===this.orientation?(this.thickness=this.width/2,t=this.width/2,e=0,i=this.thickness,s=this.height,this.knobData.r=.8*this.thickness,this.knobData.level=s-this.normalized*s,n="translate("+-1*this.thickness/2+",0)",r=i/2):(this.thickness=this.height/2,t=0,e=this.height/2,i=this.width,s=this.thickness,this.knobData.r=.8*this.thickness,this.knobData.level=this.normalized*i,n="translate(0,"+-1*this.thickness/2+")",r=s/2),this.bar.setAttribute("x",t),this.bar.setAttribute("y",e),this.bar.setAttribute("transform",n),this.bar.setAttribute("rx",r),this.bar.setAttribute("ry",r),this.bar.setAttribute("width",i),this.bar.setAttribute("height",s),"vertical"===this.orientation?(this.fillbar.setAttribute("x",t),this.fillbar.setAttribute("y",this.knobData.level),this.fillbar.setAttribute("width",i),this.fillbar.setAttribute("height",s-this.knobData.level)):(this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("y",e),this.fillbar.setAttribute("width",this.knobData.level),this.fillbar.setAttribute("height",s)),this.fillbar.setAttribute("transform",n),this.fillbar.setAttribute("rx",r),this.fillbar.setAttribute("ry",r),"vertical"===this.orientation?(this.knob.setAttribute("cx",t),this.knob.setAttribute("cy",this.knobData.level)):(this.knob.setAttribute("cx",this.knobData.level),this.knob.setAttribute("cy",e)),this.knob.setAttribute("r",this.knobData.r),this.position&&this.position.resize([0,this.width],[this.height,0])}},colorInterface:{value:function(){this.bar.setAttribute("fill",this.colors.fill),this.fillbar.setAttribute("fill",this.colors.accent),this.knob.setAttribute("fill",this.colors.accent),this.hasKnob||this.knob.setAttribute("fill","none")}},render:{value:function(){this.clicked||(this.knobData.r=.75*this.thickness),this.knob.setAttribute("r",this.knobData.r),"vertical"===this.orientation?(this.knobData.level=this._value.normalized*this.height,this.knob.setAttribute("cy",this.height-this.knobData.level),this.fillbar.setAttribute("y",this.height-this.knobData.level),this.fillbar.setAttribute("height",this.knobData.level)):(this.knobData.level=this._value.normalized*this.width,this.knob.setAttribute("cx",this.knobData.level),this.fillbar.setAttribute("x",0),this.fillbar.setAttribute("width",this.knobData.level))}},down:{value:function(){this.clicked=!0,this.knobData.r=.9*this.thickness,this.position.anchor=this.mouse,this.slide()}},slide:{value:function(){this.clicked&&(this.position.update(this.mouse),this.value=this._value.updateNormal(this.position.value),this.emit("change",this.value))}},up:{value:function(){this.clicked=!1,this.render()}},normalized:{get:function(){return this._value.normalized}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.position.value=this._value.normalized,this.render()}},min:{get:function(){return this._value.min},set:function(t){this._value.min=t}},max:{get:function(){return this._value.max},set:function(t){this._value.max=t}},step:{get:function(){return this._value.step},set:function(t){this._value.step=t}},mode:{get:function(){return this.position.mode},set:function(t){this.position.mode=t}}}),e}(h);t.exports=u},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},h=i(4),a=i(5),l=i(6),u=i(11),c=(s=i(12))&&s.__esModule?s:{default:s},f=function(t){function e(){o(this,e);var t=["scale","value"],i={size:[120,20],orientation:"horizontal",mode:"relative",scale:[-1,1],step:0,value:0,hasKnob:!0};r(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.orientation=this.settings.orientation,this.mode=this.settings.mode,this.hasKnob=this.settings.hasKnob,this.step=this.settings.step,this._value=new u(this.settings.scale[0],this.settings.scale[1],this.settings.step,this.settings.value),this.init(),this.position=new c.Handle(this.mode,this.orientation,[0,this.width],[this.height,0]),this.position.value=this._value.normalized,this.value=this._value.value,this.emit("change",this.value)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),n(e,{buildInterface:{value:function(){this.bar=h.create("rect"),this.knob=h.create("circle"),this.element.appendChild(this.bar),this.element.appendChild(this.knob)}},sizeInterface:{value:function(){this.position&&this.position.resize([0,this.width],[this.height,0]),this.width<this.height?this.orientation="vertical":this.orientation="horizontal";var t=void 0,e=void 0,i=void 0,s=void 0,n=void 0,r=void 0;this.knobData={level:0,r:0},"vertical"===this.orientation?(this.thickness=this.width/2,t=this.width/2,e=0,i=this.thickness,s=this.height,this.knobData.r=.8*this.thickness,this.knobData.level=s-this.knobData.r-this.normalized*(s-2*this.knobData.r),n="translate("+-1*this.thickness/2+",0)",r=i/2):(this.thickness=this.height/2,t=0,e=this.height/2,i=this.width,s=this.thickness,this.knobData.r=.8*this.thickness,this.knobData.level=this.normalized*(i-2*this.knobData.r)+this.knobData.r,n="translate(0,"+-1*this.thickness/2+")",r=s/2),this.bar.setAttribute("x",t),this.bar.setAttribute("y",e),this.bar.setAttribute("transform",n),this.bar.setAttribute("rx",r),this.bar.setAttribute("ry",r),this.bar.setAttribute("width",i),this.bar.setAttribute("height",s),"vertical"===this.orientation?(this.knob.setAttribute("cx",t),this.knob.setAttribute("cy",this.knobData.level)):(this.knob.setAttribute("cx",this.knobData.level),this.knob.setAttribute("cy",e)),this.knob.setAttribute("r",this.knobData.r)}},colorInterface:{value:function(){this.bar.setAttribute("fill",this.colors.fill),this.knob.setAttribute("fill",this.colors.accent),this.hasKnob||this.knob.setAttribute("fill","transparent")}},render:{value:function(){this.clicked||(this.knobData.r=.75*this.thickness),this.knob.setAttribute("r",this.knobData.r),"vertical"===this.orientation?(this.knobData.level=this.knobData.r+this._value.normalized*(this.height-2*this.knobData.r),this.knob.setAttribute("cy",this.height-this.knobData.level)):(this.knobData.level=this._value.normalized*(this.width-2*this.knobData.r)+this.knobData.r,this.knob.setAttribute("cx",this.knobData.level))}},click:{value:function(){this.knobData.r=.9*this.thickness,this.position.anchor=this.mouse,this.move()}},move:{value:function(){this.clicked&&(this.position.update(this.mouse),this.value=this._value.updateNormal(this.position.value),this.emit("change",{value:this.value,L:Math.pow(a.scale(this.value,-1,1,1,0),2),R:Math.pow(a.scale(this.value,-1,1,0,1),2)}))}},release:{value:function(){this.render()}},value:{get:function(){return this._value.value},set:function(t){this._value.update(t),this.position.value=this._value.normalized,this.emit("change",{value:this.value,L:Math.pow(a.scale(this.value,-1,1,1,0),2),R:Math.pow(a.scale(this.value,-1,1,0,1),2)}),this.render()}},normalized:{get:function(){return this._value.normalized}}}),e}(l);t.exports=f},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(5),h=i(4),a=i(6),l=function(t,e){this.x=t.x,this.y=t.y,this.xMin=t.xMin||0,this.xMax=t.xMax||1,this.yMin=t.yMin||0,this.yMax=t.yMax||1,this.envelope=e,this.element=h.create("circle"),this.element.setAttribute("fill",this.envelope.colors.accent),this.envelope.element.appendChild(this.element),this.resize=function(){var t=2+~~(Math.min(this.envelope.width,this.envelope.height)/50);this.element.setAttribute("r",t)},this.move=function(t,e){if(this.x=t||0===t?t:this.x,this.y=e||0===e?e:this.y,this.envelope.nodes.indexOf(this)>=0){var i=this.envelope.nodes.indexOf(this)-1,s=this.envelope.nodes.indexOf(this)+1,n=this.envelope.nodes[i],r=this.envelope.nodes[s],o=i>=0?n.x:0;o=o<this.xMin?this.xMin:o;var h=s<this.envelope.nodes.length?r.x:1;h=h>this.xMax?this.xMax:h,this.x<o&&(this.x=o),this.x>h&&(this.x=h),this.y<this.yMin&&(this.y=this.yMin),this.y>this.yMax&&(this.y=this.yMax)}this.location=this.getCoordinates(),this.element.setAttribute("cx",this.location.x),this.element.setAttribute("cy",this.location.y)},this.getCoordinates=function(){return{x:this.x*this.envelope.width,y:(1-this.y)*this.envelope.height}},this.move(this.x,this.y,!0),this.resize(),this.destroy=function(){this.envelope.element.removeChild(this.element),this.envelope.nodes.splice(this.envelope.nodes.indexOf(this),1)}},u=function(t){function e(){r(this,e);var t=["value"],i={size:[300,150],noNewPoints:!1,points:[{x:.1,y:.4},{x:.35,y:.6},{x:.65,y:.2},{x:.9,y:.4}]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.points=this.settings.points,this.nodes=[],this.selected=!1,this.init()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildInterface:{value:function(){var t=this;this.points.forEach((function(e){var i=new l(e,t);t.nodes.push(i)})),this.sortPoints(),this.line=h.create("polyline"),this.line.setAttribute("stroke-width",2),this.line.setAttribute("fill","none"),this.element.appendChild(this.line),this.fill=h.create("polyline"),this.fill.setAttribute("fill-opacity","0.2"),this.element.appendChild(this.fill)}},sizeInterface:{value:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].resize(),this.nodes[t].move();this.render()}},colorInterface:{value:function(){var t=this;this.element.style.backgroundColor=this.colors.fill,this.line.setAttribute("stroke",this.colors.accent),this.fill.setAttribute("fill",this.colors.accent),this.nodes.forEach((function(e){e.element.setAttribute("fill",t.colors.accent)}))}},render:{value:function(){this.calculatePath()}},calculatePoints:{value:function(){var t=this;this.points=[],this.nodes.forEach((function(e){t.points.push({x:e.x,y:e.y})}))}},calculatePath:{value:function(){var t="0 "+this.nodes[0].location.y+", ";this.nodes.forEach((function(e){t+=e.location.x+" "+e.location.y+", "})),t+=this.width+" "+this.nodes[this.nodes.length-1].location.y,this.line.setAttribute("points",t),t+=", "+this.width+" "+this.height+", ",t+="0 "+this.height,this.fill.setAttribute("points",t)}},click:{value:function(){this.hasMoved=!1,this.selected=this.findNearestNode(),this.nodes[this.selected].move(this.mouse.x/this.width,1-this.mouse.y/this.height),this.scaleNode(this.selected),this.calculatePoints(),this.emit("change",this.points),this.render()}},move:{value:function(){this.clicked&&(this.mouse.x=o.clip(this.mouse.x,0,this.width),this.hasMoved=!0,this.nodes[this.selected].move(this.mouse.x/this.width,1-this.mouse.y/this.height),this.scaleNode(this.selected),this.calculatePoints(),this.emit("change",this.points),this.render())}},release:{value:function(){this.hasMoved||this.nodes[this.selected].destroy(),this.calculatePoints(),this.emit("change",this.points),this.render(),this.selected=null}},findNearestNode:{value:function(){for(var t=null,e=1e4,i=this.mouse.x/this.width,s=1-this.mouse.y/this.height,n=this.nodes,r=0;r<n.length;r++){var o=Math.sqrt(Math.pow(n[r].x-i,2)+Math.pow(n[r].y-s,2));o<e&&(e=o,t=r,n[r].x)}return!this.settings.noNewPoints&&e>.07&&(t=this.getIndexFromX(this.mouse.x/this.width),this.nodes.splice(t,0,new l({x:this.mouse.x/this.width,y:1-this.mouse.y/this.height},this)),this.hasMoved=!0),t}},getIndexFromX:{value:function(t){var e=this,i=0;return this.nodes.forEach((function(s,n){e.nodes[n].x<=t&&(i=n+1)})),i}},scaleNode:{value:function(t){var e=o.clip(this.nodes[t].x,0,1),i=o.clip(this.nodes[t].y,0,1);this.nodes[t].move(e,i)}},sortPoints:{value:function(){this.nodes.sort((function(t,e){return t.x>e.x}))}},addPoint:{value:function(t,e){var i=this.nodes.length;this.sortPoints();for(var s=0;s<this.nodes.length;s++)if(t<this.nodes[s].x){i=s;break}this.nodes.splice(i,0,new l({x:t,y:e},this)),this.scaleNode(i),this.calculatePoints(),this.emit("change",this.points),this.render()}},scan:{value:function(t){var e=this.getIndexFromX(t),i=e-1;i<0&&(i=0),e>=this.nodes.length&&(e=this.nodes.length-1);var s=this.nodes[i],n=this.nodes[e],r=o.scale(t,s.x,n.x,0,1),h=o.interp(r,s.y,n.y);return this.emit("scan",h),h}},movePoint:{value:function(t,e,i){this.nodes[t].move(e,i),this.scaleNode(t),this.calculatePoints(),this.emit("change",this.points),this.render()}},adjustPoint:{value:function(t,e,i){this.nodes[t].move(this.nodes[t].x+e,this.nodes[t].y+i),this.scaleNode(t),this.calculatePoints(),this.emit("change",this.points),this.render()}},destroyPoint:{value:function(t){this.nodes[t].destroy(),this.calculatePoints(),this.emit("change",this.points),this.render()}},setPoints:{value:function(t){for(var e=this;this.nodes.length;)this.nodes[0].destroy();t.forEach((function(t){e.addPoint(t.x,t.y)})),this.calculatePoints(),this.emit("change",this.points),this.render()}}}),e}(a);t.exports=u},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(7),h=i(6),a=i(1).context,l=function(t){function e(){r(this,e);var t=["scale","value"],i={size:[300,150]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.context=a(),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.active=!0,this.source=!1,this.init()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.canvas=new o.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){if(this.active&&requestAnimationFrame(this.render.bind(this)),this.analyser.getByteFrequencyData(this.dataArray),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height),this.source&&this.dataArray)for(var t=this.canvas.element.width/this.bufferLength,e=void 0,i=0,s=this.canvas.element.width/50,n=0;n<this.bufferLength;n+=s)e=Math.max.apply(null,this.dataArray.subarray(n,n+s)),e/=255,e*=this.canvas.element.height,this.canvas.context.fillStyle=this.colors.accent,this.canvas.context.fillRect(i,this.canvas.element.height-e,t*s,e),i+=t*s}},connect:{value:function(t){this.source&&this.disconnect(),this.source=t,this.source.connect(this.analyser),this.render()}},disconnect:{value:function(){this.source.disconnect(this.analyser),this.source=null}},click:{value:function(){this.active=!this.active,this.render()}},customDestroy:{value:function(){this.active=!1}}}),e}(h);t.exports=l},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(7),h=i(5),a=i(6),l=i(1).context,u=function(t){function e(){r(this,e);var t=["scale","value"],i={size:[30,100]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.context=l(),this.channels=2,this.splitter=this.context.createChannelSplitter(this.channels),this.analysers=[];for(var s=0;s<this.channels;s++){var o=this.context.createAnalyser();this.splitter.connect(o,s),o.fftSize=1024,o.smoothingTimeConstant=1,this.analysers.push(o)}this.bufferLength=this.analysers[0].frequencyBinCount,this.dataArray=new Float32Array(this.bufferLength),this.active=!0,this.db=-1/0,this.init(),this.meterWidth=this.canvas.element.width/this.channels,this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.canvas=new o.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){this.active&&requestAnimationFrame(this.render.bind(this)),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height);for(var t=0;t<this.analysers.length;t++){if(this.source){this.analysers[t].getFloatTimeDomainData(this.dataArray);for(var e=0,i=0;i<this.dataArray.length;i++)e+=this.dataArray[i]*this.dataArray[i];e=Math.sqrt(e/this.dataArray.length),this.db=20*Math.log10(e)}else this.db>-200&&this.db!==-1/0?this.db-=1:this.db=-1/0;if(this.db>-70){var s=h.normalize(this.db,-70,5),n=s*s,r=h.scale(n,0,1,this.element.height,0);this.canvas.context.fillStyle=this.colors.accent,this.canvas.context.fillRect(this.meterWidth*t,r,this.meterWidth,this.canvas.element.height-r)}}}},connect:{value:function(t,e){this.source&&this.disconnect(),e?this.channels=e:t.channelCount?this.channels=t.channelCount:this.channels=2,this.meterWidth=this.canvas.element.width/this.channels,this.source=t,this.source.connect(this.splitter)}},disconnect:{value:function(){this.source.disconnect(this.splitter),this.source=!1,this.meterWidth=this.canvas.element.width/this.channels}},click:{value:function(){this.active=!this.active,this.render()}},customDestroy:{value:function(){this.active=!1}}}),e}(a);t.exports=u},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=function t(e,i,s){var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,s)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(7),h=i(6),a=i(1).context,l=function(t){function e(){r(this,e);var t=["scale","value"],i={size:[300,150]};n(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,arguments,t,i),this.context=a(),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.active=!0,this.source=!1,this.init(),this.render()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}(e,t),s(e,{buildFrame:{value:function(){this.canvas=new o.SmartCanvas(this.parent),this.element=this.canvas.element}},sizeInterface:{value:function(){this.canvas.resize(this.width,this.height)}},colorInterface:{value:function(){this.canvas.element.style.backgroundColor=this.colors.fill}},render:{value:function(){if(this.active&&requestAnimationFrame(this.render.bind(this)),this.analyser.getByteTimeDomainData(this.dataArray),this.canvas.context.fillStyle=this.colors.fill,this.canvas.context.fillRect(0,0,this.canvas.element.width,this.canvas.element.height),this.canvas.context.lineWidth=~~(this.height/100+2),this.canvas.context.strokeStyle=this.colors.accent,this.canvas.context.beginPath(),this.source)for(var t=1*this.canvas.element.width/this.bufferLength,e=0,i=0;i<this.bufferLength;i++){var s=this.dataArray[i]/128*this.canvas.element.height/2;0===i?this.canvas.context.moveTo(e,s):this.canvas.context.lineTo(e,s),e+=t}else this.canvas.context.moveTo(0,this.canvas.element.height/2),this.canvas.context.lineTo(this.canvas.element.width,this.canvas.element.height/2);this.canvas.context.stroke()}},connect:{value:function(t){this.source&&this.disconnect(),this.source=t,this.source.connect(this.analyser),this.render()}},disconnect:{value:function(){this.source&&(this.source.disconnect(this.analyser),this.source=null)}},click:{value:function(){this.active=!this.active,this.render()}},customDestroy:{value:function(){this.active=!1}}}),e}(h);t.exports=l},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=(s=i(39))&&s.__esModule?s:{default:s},o=function(t){return t&&t.__esModule?t.default:t}(i(7)),h=i(1).colors,a=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.meta={},this.meta.target=e,this.meta.parent=o.parseElement(e),this.meta.colors={},i?(this.meta.attribute=i.attribute||"nexus-ui",this.meta.title=i.name||!1,this.meta.open=i.open||!1):(this.meta.attribute="nexus-ui",this.meta.title=!1,this.meta.open=!1);var s=h();this.meta.colors.accent=s.accent,this.meta.colors.fill=s.fill,this.meta.colors.light=s.light,this.meta.colors.dark=s.dark,this.meta.colors.mediumLight=s.mediumLight,this.meta.colors.mediumDark=s.mediumDark,this.buildInterface(),this.colorInterface()}return n(t,{buildInterface:{value:function(){var t=this;for(this.meta.parent.style.boxSizing="border-box",this.meta.parent.style.userSelect="none",this.meta.parent.style.mozUserSelect="none",this.meta.parent.style.webkitUserSelect="none",this.meta.contents=document.createElement("div");this.meta.parent.childNodes.length>0;)this.meta.contents.appendChild(this.meta.parent.childNodes[0]);this.meta.contents.style.padding="0px",this.meta.contents.style.boxSizing="border-box",this.meta.title&&(this.meta.titleBar=document.createElement("div"),this.meta.titleBar.innerHTML=this.meta.title,this.meta.titleBar.style.fontFamily="arial",this.meta.titleBar.style.position="relative",this.meta.titleBar.style.color="#888",this.meta.titleBar.style.padding="7px",this.meta.titleBar.style.fontSize="12px",this.meta.button=document.createElement("div"),this.meta.button.style.position="absolute",this.meta.button.style.top="5px",this.meta.button.style.right="5px",this.meta.button.innerHTML="-",this.meta.button.style.padding="0px 5px 2px",this.meta.button.style.lineHeight="12px",this.meta.button.style.fontSize="15px",this.meta.button.style.cursor="pointer",this.meta.button.addEventListener("mouseover",(function(){t.meta.button.style.backgroundColor=t.meta.colors.mediumDark})),this.meta.button.addEventListener("mouseleave",(function(){t.meta.button.style.backgroundColor=t.meta.colors.mediumLight})),this.meta.button.addEventListener("click",(function(){t.meta.open?t.hide():t.show()})),this.meta.titleBar.appendChild(this.meta.button),this.meta.parent.appendChild(this.meta.titleBar)),this.meta.parent.appendChild(this.meta.contents);var e=r.section(this.meta.target,this.meta.attribute);for(var i in e)this[i]=e[i]}},colorInterface:{value:function(){this.meta.title&&(this.meta.button.style.backgroundColor=this.meta.colors.mediumLight,this.meta.button.style.border="solid 0px "+this.meta.colors.fill,this.meta.parent.style.border="solid 1px "+this.meta.colors.mediumLight,this.meta.parent.style.backgroundColor=this.meta.colors.light,this.meta.titleBar.style.backgroundColor=this.meta.colors.fill)}},show:{value:function(){this.meta.contents.style.display="block",this.meta.open=!0}},hide:{value:function(){this.meta.contents.style.display="none",this.meta.open=!1}},colorize:{value:function(t,e){for(var i in this)this[i].colorize&&this[i].colorize(t,e);this.meta.colors[t]=e,this.colorInterface()}},empty:{value:function(){for(var t in this)this[t].destroy&&this[t].destroy()}}}),t}();t.exports=a},function(t,e,i){"use strict";var s=function(t){return t&&t.__esModule?t.default:t};Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(7)),r=s(i(2)),o=function(t,e){var i=t.type;return e[i]?e[i]++:e[i]=1,i+e[i]},h=function(t,e,i){i=i||{};for(var s=0;s<t.attributes.length;s++){var n=t.attributes[s];i[n.nodeName]=n.nodeValue}e=e[0].toUpperCase()+e.slice(1);var o=new r[e](t,i);return o.id=t.id,o};e.element=h,e.section=function(t,e){e=e||"nexus-ui";for(var i={},s={},a=n.parseElement(t).getElementsByTagName("*"),l=[],u=0;u<a.length;u++)l.push(a[u]);for(u=0;u<l.length;u++){var c=l[u].getAttribute(e);if(c){var f=!1;for(var d in r)c.toLowerCase()===d.toLowerCase()&&(f=d);console.log(f);var v=h(l[u],f);v.id?s[v.id]=v:s[o(v,i)]=v}}return s},e.add=function(t,e,i){var s=document.createElement("div");return i=i||{},(e=e?n.parseElement(e):document.body).appendChild(s),i.target=s,i.size&&(s.style.width=i.size[0]+"px",s.style.height=i.size[1]+"px"),h(s,t,i)}},function(t,e,i){"use strict";var s,n=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=(s=i(5))&&s.__esModule?s.default:s,o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scale=[],this.mode={output:"frequency",input:"step"},this.etmajor=[261.62558,293.664764,329.627563,349.228241,391.995422,440,493.883301,523.25116],this.root=r.mtof(60),this.createScale(0,2,4,5,7,9,11)}return n(t,{note:{value:function(t,e){return"frequency"===this.mode.output?this.frequency(t,e):"ratio"===this.mode.output?this.ratio(t,e):"MIDI"===this.mode.output?this.MIDI(t,e):this.frequency(t,e)}},frequency:{value:function(t,e){"midi"!==this.mode.input&&"MIDI"!==this.mode.input||(this.stepIn+=60);var i=Math.floor(t/this.scale.length);e&&(i+=e);for(var s=t%this.scale.length;s<0;)s+=this.scale.length;var n=this.scale[s],r=this.root*n;return r*=Math.pow(2,i),Math.floor(1e11*r)/1e11}},ratio:{value:function(t,e){"midi"!==this.mode.input&&"MIDI"!==this.mode.input||(this.stepIn+=60);var i=Math.floor(t/this.scale.length);e&&(i+=e);var s=t%this.scale.length,n=Math.pow(2,i)*this.scale[s];return n=Math.floor(1e11*n)/1e11}},MIDI:{value:function(t,e){var i=this.frequency(t,e),s=69+12*Math.log(i/440)/Math.log(2);return Math.floor(1e9*s)/1e9}},createScale:{value:function(){for(var t=[],e=0;e<arguments.length;e++)t.push(r.mtof(60+arguments[e]));this.loadScaleFromFrequencies(t)}},createJIScale:{value:function(){this.scale=[];for(var t=0;t<arguments.length;t++)this.scale.push(arguments[t])}},loadScaleFromFrequencies:{value:function(t){this.scale=[];for(var e=0;e<t.length-1;e++)this.scale.push(t[e]/t[0])}},loadScale:{value:function(t){var e=this.scales[t].frequencies;this.loadScaleFromFrequencies(e)}},search:{value:function(t){var e=[];for(var i in this.scales)-1!==i.toLowerCase().indexOf(t.toLowerCase())&&e.push(i);return e}},chord:{value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.note(t[i]));return e}}}),t}();t.exports=o},function(t,e){"use strict";var i=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r=void 0===arguments[0]?3:arguments[0];s(this,t),r<0&&(r=1),this.length=r,this.onVals=i,this.array=new Array(r).fill(0),i.length>0&&this.on.apply(this,i)}return i(t,{select:{value:function(t){return this.array.fill(0),this.array[t]=1,this.array}},flip:{value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=this.array;return e.length>0?e.forEach((function(t){t>s.length-1?console.warn("Warning: AnonRadio["+t+"] does not exist"):s[t]=s[t]?0:1})):s.forEach((function(t,e,i){i[e]=t?0:1})),s}},on:{value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=this.array;return e.length>0?e.forEach((function(t){t>s.length-1?console.warn("Warning: AnonRadio["+t+"] exceeds size of object"):(1===s[t]&&console.warn("Warning: AnonRadio["+t+"] was already on."),s[t]=1)})):s.fill(1),s}},off:{value:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var s=this.array;return e.length>0?e.forEach((function(t){s[t]=0})):s.fill(0),s}}}),t}();t.exports=n},function(t,e,i){var s=i(43);t.exports=s,"undefined"!=typeof window&&(window.WAAClock=s)},function(t,e,i){(function(e){var i=function(t,e,i){this.clock=t,this.func=i,this._cleared=!1,this.toleranceLate=t.toleranceLate,this.toleranceEarly=t.toleranceEarly,this._latestTime=null,this._earliestTime=null,this.deadline=null,this.repeatTime=null,this.schedule(e)};i.prototype.clear=function(){return this.clock._removeEvent(this),this._cleared=!0,this},i.prototype.repeat=function(t){if(0===t)throw new Error("delay cannot be 0");return this.repeatTime=t,this.clock._hasEvent(this)||this.schedule(this.deadline+this.repeatTime),this},i.prototype.tolerance=function(t){return"number"==typeof t.late&&(this.toleranceLate=t.late),"number"==typeof t.early&&(this.toleranceEarly=t.early),this._refreshEarlyLateDates(),this.clock._hasEvent(this)&&(this.clock._removeEvent(this),this.clock._insertEvent(this)),this},i.prototype.isRepeated=function(){return null!==this.repeatTime},i.prototype.schedule=function(t){this._cleared=!1,this.deadline=t,this._refreshEarlyLateDates(),this.clock.context.currentTime>=this._earliestTime?this._execute():this.clock._hasEvent(this)?(this.clock._removeEvent(this),this.clock._insertEvent(this)):this.clock._insertEvent(this)},i.prototype.timeStretch=function(t,e){this.isRepeated()&&(this.repeatTime=this.repeatTime*e);var i=t+e*(this.deadline-t);if(this.isRepeated())for(;this.clock.context.currentTime>=i-this.toleranceEarly;)i+=this.repeatTime;this.schedule(i)},i.prototype._execute=function(){!1!==this.clock._started&&(this.clock._removeEvent(this),this.clock.context.currentTime<this._latestTime?this.func(this):(this.onexpired&&this.onexpired(this),console.warn("event expired")),this.clock._hasEvent(this)||!this.isRepeated()||this._cleared||this.schedule(this.deadline+this.repeatTime))},i.prototype._refreshEarlyLateDates=function(){this._latestTime=this.deadline+this.toleranceLate,this._earliestTime=this.deadline-this.toleranceEarly};var s=t.exports=function(t,e){e=e||{},this.tickMethod=e.tickMethod||"ScriptProcessorNode",this.toleranceEarly=e.toleranceEarly||.001,this.toleranceLate=e.toleranceLate||.1,this.context=t,this._events=[],this._started=!1};s.prototype.setTimeout=function(t,e){return this._createEvent(t,this._absTime(e))},s.prototype.callbackAtTime=function(t,e){return this._createEvent(t,e)},s.prototype.timeStretch=function(t,e,i){return e.forEach((function(e){e.timeStretch(t,i)})),e},s.prototype.start=function(){if(!1===this._started){var t=this;if(this._started=!0,this._events=[],"ScriptProcessorNode"===this.tickMethod)this._clockNode=this.context.createScriptProcessor(256,1,1),this._clockNode.connect(this.context.destination),this._clockNode.onaudioprocess=function(){e.nextTick((function(){t._tick()}))};else if("manual"!==this.tickMethod)throw new Error("invalid tickMethod "+this.tickMethod)}},s.prototype.stop=function(){!0===this._started&&(this._started=!1,this._clockNode.disconnect())},s.prototype._tick=function(){for(var t=this._events.shift();t&&t._earliestTime<=this.context.currentTime;)t._execute(),t=this._events.shift();t&&this._events.unshift(t)},s.prototype._createEvent=function(t,e){return new i(this,e,t)},s.prototype._insertEvent=function(t){this._events.splice(this._indexByTime(t._earliestTime),0,t)},s.prototype._removeEvent=function(t){var e=this._events.indexOf(t);-1!==e&&this._events.splice(e,1)},s.prototype._hasEvent=function(t){return-1!==this._events.indexOf(t)},s.prototype._indexByTime=function(t){for(var e,i=0,s=this._events.length;i<s;)e=Math.floor((i+s)/2),this._events[e]._earliestTime<t?i=e+1:s=e;return i},s.prototype._absTime=function(t){return t+this.context.currentTime},s.prototype._relTime=function(t){return t-this.context.currentTime}}).call(e,i(44))},function(t,e){var i,s,n=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function h(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(t){s=o}}();var a,l=[],u=!1,c=-1;function f(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var t=h(f);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function v(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new v(t,e)),1!==l.length||u||h(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i in e){var s=e[i];s.configurable=!0,s.value&&(s.writable=!0)}Object.defineProperties(t,e)}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=i(1).clock,r=function(){function t(e,i,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rate=e,this.on=s,this.clock=n(),this.pattern=[1],this.index=0,this.event=i||function(){},this.on&&this.start()}return s(t,{_event:{value:function(t){this.event(t),this.index++}},stop:{value:function(){this.on=!1,this.interval.clear()}},start:{value:function(){this.on=!0,this.interval=this.clock.callbackAtTime(this._event.bind(this),this.clock.context.currentTime).repeat(this.rate/1e3).tolerance({early:.1,late:1})}},ms:{value:function(t){if(this.on){var e=t/this.rate;this.rate=t,this.clock.timeStretch(this.clock.context.currentTime,[this.interval],e)}else this.rate=t}}}),t}();t.exports=r}])}));